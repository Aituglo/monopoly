(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t){},120:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(16),s=a.n(o),i=a(2),l=a(3),c=a(7),p=a(6),d=a(8),m=a(4),u=a(124),g=(a(71),a(24)),y=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_URL||"https://monopoly.cassimkhouani.com",h=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={game_name:"",game_password:"",username:"",password:"",selectedTab:"create_game",searchGameName:"",gamesFound:[],gamesFoundSelected:-1,joinGamePassword:"",joinGameUsername:"",joinGameUsernamePassword:"",formError:""},a.submitNewGame=function(e){e.preventDefault(),fetch("".concat(y,"/create_game"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({game_name:a.state.game_name,game_password:a.state.game_password,username:a.state.username,password:a.state.password})}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("previous_game",JSON.stringify({game_name:a.state.game_name,game_password:a.state.game_password,username:a.state.username,password:a.state.password,game_id:e.game_id})),console.log(e),a.props.history.push("/play-game")})},a.joinGame=function(e){e.preventDefault(),console.log(a.state.gamesFound[a.state.gamesFoundSelected]._id),fetch("".concat(y,"/join_game"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({game_id:a.state.gamesFound[a.state.gamesFoundSelected]._id,game_password:a.state.joinGamePassword,username:a.state.joinGameUsername,password:a.state.joinGameUsernamePassword})}).then(function(e){return e.json()}).then(function(e){console.log(e),e.error?a.setState({formError:e.error},function(){"incorrect_game_pw"===a.state.formError?g.toast.error("Mot de passe de partie incorrect.",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}):"player_not_in_game"===a.state.formError?g.toast.error("Vous n'\xeates pas dans cette partie.",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}):"incorrect_player_pw"===a.state.formError&&g.toast.error("Mot de passe du joueur incorrect.",{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}):e.success&&(localStorage.setItem("previous_game",JSON.stringify({game_id:a.state.gamesFound[a.state.gamesFoundSelected]._id,game_name:a.state.gamesFound[a.state.gamesFoundSelected].auth.game_name,game_password:a.state.joinGamePassword,username:a.state.joinGameUsername,password:a.state.joinGameUsernamePassword})),console.log(e),a.props.history.push("/play-game"))})},a.keyPress=function(e){13===e.keyCode&&a.searchForGames()},a.searchForGames=function(){a.setState({gamesFound:[],gamesFoundSelected:-1}),fetch("".concat(y,"/search_for_games?game_name=").concat(a.state.searchGameName)).then(function(e){return e.json()}).then(function(e){a.setState({gamesFound:e.games})})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){localStorage.removeItem("username")}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"new-game-main"},n.a.createElement(g.ToastContainer,null),n.a.createElement("ul",{className:"nav nav-tabs"},n.a.createElement("li",{className:"nav-item cursor",onClick:function(){return e.setState({selectedTab:"create_game"})}},n.a.createElement("div",{className:"nav-link ".concat("create_game"===this.state.selectedTab?"active":"")},"Cr\xe9er une partie")),n.a.createElement("li",{className:"nav-item cursor",onClick:function(){return e.setState({selectedTab:"join_game"})}},n.a.createElement("div",{className:"nav-link ".concat("join_game"===this.state.selectedTab?"active":"")},"Rejoindre une partie"))),"create_game"===this.state.selectedTab&&n.a.createElement("div",{className:"create-game-input"},n.a.createElement("form",{onSubmit:this.submitNewGame},n.a.createElement("h5",null,"Cr\xe9er une partie"),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Nom de la partie"),n.a.createElement("input",{required:!0,value:this.state.game_name,onChange:function(t){var a=t.target;return e.setState({game_name:a.value})},type:"text",className:"form-control",placeholder:"Nom partie"}),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Mot de passe de la partie"),n.a.createElement("input",{required:!0,value:this.state.game_password,onChange:function(t){var a=t.target;return e.setState({game_password:a.value})},type:"password",className:"form-control mb-2",placeholder:"Mot de passe"}),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Ton nom"),n.a.createElement("input",{required:!0,value:this.state.username,onChange:function(t){var a=t.target;return e.setState({username:a.value})},type:"text",className:"form-control mb-2",placeholder:"Nom"}),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Ton mot de passe"),n.a.createElement("input",{required:!0,value:this.state.password,onChange:function(t){var a=t.target;return e.setState({password:a.value})},type:"password",className:"form-control mb-2",placeholder:"Mot de passe"}),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Cr\xe9er"))),"join_game"===this.state.selectedTab&&n.a.createElement("div",{className:"create-game-input"},n.a.createElement("h5",null,"Rejoindre une partie"),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Chercher une partie"),n.a.createElement("div",{className:"input-group"},n.a.createElement("input",{required:!0,value:this.state.searchGameName,onChange:function(t){var a=t.target;return e.setState({searchGameName:a.value})},type:"text",className:"form-control",placeholder:"Search...",onKeyDown:this.keyPress}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{onClick:this.searchForGames,className:"btn btn-outline-secondary",type:"button"},n.a.createElement("i",{className:"fas fa-search"})))),this.state.gamesFound.length>0&&n.a.createElement("div",{className:"mt-3"},n.a.createElement("h5",null,"Parties trouv\xe9es"),n.a.createElement("ul",{className:"list-group"},this.state.gamesFound.map(function(t,a){return n.a.createElement("li",{key:t._id,onClick:function(){e.state.gamesFoundSelected!==a&&e.setState({gamesFoundSelected:a,joinGamePassword:"",joinGameUsername:"",joinGameUsernamePassword:""})},className:"cursor list-group-item"},e.state.gamesFoundSelected!==a&&n.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement("div",null,t.auth.game_name),n.a.createElement("small",null,"Cr\xe9e par: ",t.player_info[0].username)),n.a.createElement("i",{className:"fas fa-arrow-circle-right"})),e.state.gamesFoundSelected===a&&n.a.createElement("div",{className:""},"INVITING_PLAYERS"===t.game_state&&n.a.createElement("div",null,n.a.createElement("small",null,"La partie n'est pas commenc\xe9, vous pouvez rejoindre...")),n.a.createElement("form",{onSubmit:e.joinGame},n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Nom de la partie"),n.a.createElement("input",{required:!0,value:t.auth.game_name,type:"text",readOnly:!0,className:"form-control",placeholder:"Nom de la partie"}),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Mot de passe de la partie"),n.a.createElement("input",{required:!0,value:e.state.joinGamePassword,onChange:function(t){var a=t.target;return e.setState({joinGamePassword:a.value})},type:"password",className:"form-control mb-2",placeholder:"Mot de passe de la partie"}),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Ton nom"),n.a.createElement("input",{required:!0,value:e.state.joinGameUsername,onChange:function(t){var a=t.target;return e.setState({joinGameUsername:a.value})},type:"text",className:"form-control mb-2",placeholder:"Ton nom"}),n.a.createElement("small",{className:"form-text text-muted align-self-start"},"Ton mot de passe"),n.a.createElement("input",{required:!0,value:e.state.joinGameUsernamePassword,onChange:function(t){var a=t.target;return e.setState({joinGameUsernamePassword:a.value})},type:"password",className:"form-control mb-2",placeholder:"Mot de passe de la partie"}),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Rejoindre"))))})))))}}]),t}(r.Component),f=Object(u.a)(Object(m.b)("store")(Object(m.c)(h))),_=(a(50),a(13)),b=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"".concat(this.props.moving?"player-moving":"player"," d-flex justify-content-center align-items-center"),style:{backgroundColor:this.props.moving?null:this.props.store.game.player_info[this.props.playerNumber].color}},this.props.moving&&n.a.createElement("i",{className:"fas fa-circle"}),!this.props.moving&&n.a.createElement("b",null,this.props.playerNumber+1))}}]),t}(r.Component),v=Object(m.b)("store")(Object(m.c)(b)),E=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t={};return this.props.right&&(t.boxShadow="-5px 0px 0px 0px ".concat(this.props.store.game.board[this.props.position].color)),this.props.left&&(t.boxShadow="5px 0px 0px 0px ".concat(this.props.store.game.board[this.props.position].color)),this.props.top&&(t.boxShadow="0px 5px 0px 0px ".concat(this.props.store.game.board[this.props.position].color)),this.props.bottom&&(t.boxShadow="0px -5px 0px 0px ".concat(this.props.store.game.board[this.props.position].color)),n.a.createElement("div",{style:Object(_.a)({backgroundImage:"url(".concat(this.props.store.game.board[this.props.position].url,")")},t),className:"game-tile d-flex flex-wrap align-content-between justify-content-between ".concat(this.props.store.game.board[this.props.position].mortgaged?"grey-card":""),onMouseLeave:this.props.store.clearMousedOverTile,onMouseEnter:function(){return e.props.store.setMousedOverTile(e.props.position)}},this.props.store.game.player_info.filter(function(e){return"OUT"!==e.state}).filter(function(t){return t.position===e.props.position}).map(function(e,t){return n.a.createElement(v,{playerNumber:e.id,key:t})}),this.props.store.game.animated_players_move.moves.filter(function(t){return t===e.props.position}).map(function(e,t){return n.a.createElement(v,{key:t,moving:!0})}),this.props.right&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"owned-square-right"}),this.props.right&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{className:"d-flex flex-column left-tiles-upgrade-bar"},this.props.store.game.board[this.props.position].upgrades>0&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"left-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>1&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"left-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>2&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"left-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>3&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"left-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>4&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"left-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>4&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"left-tiles-upgrade-bar-component"})),this.props.bottom&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"owned-square-bottom"}),this.props.bottom&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{className:"d-flex flex-row top-tiles-upgrade-bar"},this.props.store.game.board[this.props.position].upgrades>0&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"top-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>1&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"top-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>2&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"top-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>3&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"top-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>4&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"top-tiles-upgrade-bar-component"})),this.props.left&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"owned-square-left"}),this.props.left&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{className:"d-flex flex-column right-tiles-upgrade-bar"},this.props.store.game.board[this.props.position].upgrades>0&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"right-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>1&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"right-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>2&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"right-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>3&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"right-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>4&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"right-tiles-upgrade-bar-component"})),this.props.top&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"owned-square-top"}),this.props.top&&this.props.store.game.board[this.props.position].owned&&n.a.createElement("div",{className:"d-flex flex-row bottom-tiles-upgrade-bar"},this.props.store.game.board[this.props.position].upgrades>0&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"bottom-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>1&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"bottom-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>2&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"bottom-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>3&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"bottom-tiles-upgrade-bar-component"}),this.props.store.game.board[this.props.position].upgrades>4&&n.a.createElement("div",{style:{backgroundColor:this.props.store.game.player_info[this.props.store.game.board[this.props.position].player].color},className:"bottom-tiles-upgrade-bar-component"})))}}]),t}(r.Component),T=(Object(m.b)("store")(Object(m.c)(E)),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("ul",{className:"nav nav-tabs"},n.a.createElement("li",{className:"nav-item cursor",onClick:function(){return e.props.selectTab({selectedTab:"my_info"})}},n.a.createElement("div",{className:"nav-link ".concat("my_info"===this.props.selectedTab?"active":"")},"Mes infos")),n.a.createElement("li",{className:"nav-item cursor",onClick:function(){return e.props.selectTab({selectedTab:"my_properties"})}},n.a.createElement("div",{className:"nav-link ".concat("my_properties"===this.props.selectedTab?"active":"")},"Mes Propri\xe9t\xe9s")),n.a.createElement("li",{className:"nav-item cursor",onClick:function(){return e.props.selectTab({selectedTab:"trades"})}},n.a.createElement("div",{className:"nav-link ".concat("trades"===this.props.selectedTab?"active":"")},"Mes \xe9changes")),n.a.createElement("li",{className:"nav-item dropdown cursor",onMouseEnter:function(){return e.props.changeDropDown({dropdownExpanded:!0})},onMouseLeave:function(){return e.props.changeDropDown({dropdownExpanded:!1})}},n.a.createElement("div",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false"},"Joueurs"),n.a.createElement("div",{className:"dropdown-menu ".concat(this.props.dropdownExpanded?"show":"")},1===this.props.store.game.player_info.filter(function(e){return"OUT"!==e.state}).length&&n.a.createElement("div",{className:"dropdown-item"},"Pas de joueurs"),this.props.store.game.player_info.filter(function(e){return"OUT"!==e.state}).length>1&&this.props.store.game.player_info.filter(function(e){return"OUT"!==e.state}).map(function(e,t){return Object(_.a)({},e,{index:t})}).filter(function(t){return t.username!==e.props.store.gameAuthInfo.username}).map(function(t){return n.a.createElement("div",{onClick:function(){return e.props.selectTab({selectedTab:"player_info",selectedPlayer:t.id,dropdownExpanded:!1})},key:t.id,className:"dropdown-item"},t.username," - (",t.id+1,")")}))))}}]),t}(r.Component)),P=Object(m.b)("store")(Object(m.c)(T)),O=a(65),N=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=Object(O.a)(this.props.store.getPlayer.dice,2),t=e[0],a=e[1];return n.a.createElement("div",{className:"info-tab d-flex flex-column"},n.a.createElement("div",{className:"d-flex flex-row justify-content-around"},n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Nom: "),n.a.createElement("span",{className:"flex-fill"},"(",this.props.store.playerIndex+1,") - ",this.props.store.getPlayer.username)),n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Case: "),n.a.createElement("span",{className:"flex-fill"},this.props.store.playerTile.name))),n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Argent: "),n.a.createElement("span",{className:"flex-fill"},"$",this.props.store.getPlayer.money)),n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Net: "),n.a.createElement("span",{className:"flex-fill"},"$",this.props.store.netWorth)))),n.a.createElement("div",{className:"d-flex flex-row justify-content-center align-items-center dice-content"},1===t&&n.a.createElement("i",{className:"fas fa-dice-one"}),2===t&&n.a.createElement("i",{className:"fas fa-dice-two"}),3===t&&n.a.createElement("i",{className:"fas fa-dice-three"}),4===t&&n.a.createElement("i",{className:"fas fa-dice-four"}),5===t&&n.a.createElement("i",{className:"fas fa-dice-five"}),6===t&&n.a.createElement("i",{className:"fas fa-dice-six"}),n.a.createElement("div",{className:"space-between-dice"}),1===a&&n.a.createElement("i",{className:"fas fa-dice-one"}),2===a&&n.a.createElement("i",{className:"fas fa-dice-two"}),3===a&&n.a.createElement("i",{className:"fas fa-dice-three"}),4===a&&n.a.createElement("i",{className:"fas fa-dice-four"}),5===a&&n.a.createElement("i",{className:"fas fa-dice-five"}),6===a&&n.a.createElement("i",{className:"fas fa-dice-six"})))}}]),t}(r.Component),x=Object(m.b)("store")(Object(m.c)(N)),k=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"properties-tab d-flex flex-row justify-content-around my-properties-table"},n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null),n.a.createElement("th",{className:"text-center",scope:"col"},"Nom"),n.a.createElement("th",{className:"text-center",scope:"col"},"Loyer"),n.a.createElement("th",{className:"text-center",scope:"col"},"Am\xe9liorations"),n.a.createElement("th",{className:"text-center",scope:"col"},"Hypoth\xe9qu\xe9?"))),n.a.createElement("tbody",{className:""},this.props.store.playersProperties(this.props.store.playerIndex).map(function(t,a){return n.a.createElement("tr",{key:a},n.a.createElement("th",{scope:"row"},n.a.createElement("div",{className:"my-properties-pic",style:{backgroundImage:"url(".concat(t.url,")")}})),n.a.createElement("td",{className:"text-center"},t.name),n.a.createElement("td",{className:"text-center"},t.calculatedRent===parseInt(t.calculatedRent,10)?"$".concat(t.calculatedRent):t.calculatedRent),t.upgrade?n.a.createElement("td",{className:"text-center upgrade-col"},n.a.createElement("div",{className:"d-flex upgrade-bar"},n.a.createElement("div",{className:"bar-component bar-component-left ".concat(t.upgrades>0?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(t.upgrades>1?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(t.upgrades>2?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(t.upgrades>3?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(t.upgrades>4?"bar-component-filled":"")})),n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement("button",{disabled:!t.canUpgrade,className:"btn btn-sm shadow-none",style:{backgroundColor:"transparent"},onClick:function(){return e.props.store.upgradeProperty(t.index)}},n.a.createElement("i",{className:"far fa-arrow-alt-circle-up mr-2 cursor upgrade-prop"})),n.a.createElement("button",{disabled:!t.canDowngrade,className:"btn btn-sm shadow-none",style:{backgroundColor:"transparent"},onClick:function(){return e.props.store.downgradeProperty(t.index)}},n.a.createElement("i",{className:"far fa-arrow-alt-circle-down ml-2 cursor upgrade-prop"})))):n.a.createElement("td",null),n.a.createElement("td",{className:"text-center"},n.a.createElement("input",{disabled:t.mortgaged&&e.props.store.getPlayer.money-t.cost/2<0||"NOT_TURN"===e.props.store.getPlayer.state||!e.props.store.game.board.filter(function(e){return e.group===t.group}).every(function(e){return 0===e.upgrades}),onChange:function(){return e.props.store.mortgageProperty(t.index)},checked:t.mortgaged,type:"checkbox",className:"double"})," ",t.mortgaged?"(-)":"(+)",t.cost/2))}))))}}]),t}(r.Component),w=Object(m.b)("store")(Object(m.c)(k)),S=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var r=this.refs.logs;r.scrollTop=r.scrollHeight}},{key:"componentDidMount",value:function(){var e=this.refs.logs;e.scrollTop=e.scrollHeight}},{key:"render",value:function(){return n.a.createElement("div",{ref:"logs",className:"logs-tab"},0===this.props.store.game.logs.length&&n.a.createElement("div",null,"Pas d'actions..."),this.props.store.game.logs.map(function(e,t){return n.a.createElement("div",{key:t},e.log)}))}}]),t}(r.Component),j=Object(m.b)("store")(Object(m.c)(S)),I=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return"ENDED"===this.props.store.game.game_state?n.a.createElement("div",{className:"actions-tab d-flex flex-row justify-content-center align-items-center"},"La partie est finie"):"INVITING_PLAYERS"===this.props.store.game.game_state&&0===this.props.store.playerIndex?n.a.createElement("div",{className:"actions-tab d-flex flex-row justify-content-center align-items-center"},n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.props.store.startGame},"Commencer")):n.a.createElement("div",{className:"actions-tab d-flex flex-row justify-content-center align-items-center"},"OUT"!==this.props.store.playerState&&"START_TURN"===this.props.store.playerState&&this.props.store.getPlayer.jail_turns<3&&n.a.createElement("button",{type:"button",onClick:this.props.store.startTurn,className:"btn btn-primary"},"Jeter les d\xe9s"),"NOT_TURN"===this.props.store.playerState&&n.a.createElement("div",null,"Tour de ",this.props.store.currentPlayerTurn.username,"."),"UTILITY_CHANCE_CARD"===this.props.store.playerState&&n.a.createElement("button",{type:"button",onClick:this.props.store.utilityChanceCardPayment,className:"btn btn-primary"},"Lance pour voir combien tu payes"),this.props.store.getPlayer.jail_state&&"START_TURN"===this.props.store.playerState&&n.a.createElement("button",{type:"button",onClick:this.props.store.payOutOfJail,className:"btn btn-primary"},"Payer 50"),("BUY_TILE"===this.props.store.playerState||"BUY_TILE_NO_MONEY"===this.props.store.playerState)&&n.a.createElement("div",{className:"accept-reject-tile-buy-div d-flex justify-content-center"},n.a.createElement("div",{className:"btn-group",role:"group"},n.a.createElement("button",{disabled:"BUY_TILE_NO_MONEY"===this.props.store.playerState,type:"button",className:"btn btn-primary buy-tile-button text-center",onClick:this.props.store.buyTile},"Acheter"),n.a.createElement("button",{type:"button",className:"btn btn-primary reject-buy-tile-button",onClick:this.props.store.rejectBuyTile},"Non"))),"INCOME_TAX"===this.props.store.playerState&&n.a.createElement("div",null,n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.props.store.payPercentTax},"Payer 10%"),n.a.createElement("button",{type:"button",className:"btn btn-primary pay-flat-tax-button",onClick:this.props.store.payFlatTax},"Payer $200")),"END_OF_TURN"===this.props.store.playerState&&n.a.createElement("button",{disabled:this.props.store.getPlayer.money<0,type:"button",onClick:this.props.store.endTurn,className:"btn btn-primary"},"Fin du tour"),"END_OF_TURN"===this.props.store.playerState&&this.props.store.getPlayer.money<0&&n.a.createElement("button",{type:"button",onClick:this.props.store.giveUp,className:"btn btn-primary"},"Abandonner"))}}]),t}(r.Component),R=Object(m.b)("store")(Object(m.c)(I)),L=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"d-flex flex-row justify-content-around"},n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Nom: "),n.a.createElement("span",{className:"flex-fill"},this.props.store.game.player_info[this.props.player].username," - (",this.props.player+1,")")),n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Case: "),n.a.createElement("span",{className:"flex-fill"},this.props.store.game.board[this.props.store.game.player_info[this.props.player].position].name)),n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Sortie prison: "),n.a.createElement("span",{className:"flex-fill"},"Non"))),n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Argent: "),n.a.createElement("span",{className:"flex-fill"},"$",this.props.store.game.player_info[this.props.player].money)),n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Net: "),n.a.createElement("span",{className:"flex-fill"},"$",this.props.store.netWorthOfPlayer(this.props.player))),n.a.createElement("div",{className:"d-flex flex-row info-tab-row"},n.a.createElement("span",{className:"info-tab-label"},"Possible: "),n.a.createElement("span",{className:"flex-fill"},"$",this.props.store.liquidWorthofPlayer(this.props.player))))),n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement("button",{onClick:function(){return e.props.selectTab({selectedTab:"player_trade"})},type:"button",className:"btn btn-primary",disabled:"NOT_TURN"===this.props.store.getPlayer.state},"\xc9change")),n.a.createElement("div",{className:"other-players-properties-tab d-flex flex-row justify-content-around other-players-properties-table"},n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null),n.a.createElement("th",{className:"text-center",scope:"col"},"Nom"),n.a.createElement("th",{className:"text-center",scope:"col"},"Loyer"),n.a.createElement("th",{className:"text-center",scope:"col"},"Am\xe9liorations"),n.a.createElement("th",{className:"text-center",scope:"col"},"Hypoth\xe9qu\xe9?"))),n.a.createElement("tbody",{className:""},this.props.store.playersProperties(this.props.player).map(function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("th",{scope:"row"},n.a.createElement("div",{className:"my-properties-pic",style:{backgroundImage:"url(".concat(e.url,")")}})),n.a.createElement("td",{className:"text-center"},e.name),n.a.createElement("td",{className:"text-center"},e.calculatedRent===parseInt(e.calculatedRent,10)?"$".concat(e.calculatedRent):e.calculatedRent),e.upgrade?n.a.createElement("td",{className:"text-center upgrade-col"},n.a.createElement("div",{className:"d-flex upgrade-bar-other-player justify-content-center"},n.a.createElement("div",{className:"bar-component bar-component-left ".concat(e.upgrades>0?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(e.upgrades>1?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(e.upgrades>2?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(e.upgrades>3?"bar-component-filled":"")}),n.a.createElement("div",{className:"bar-component ".concat(e.upgrades>4?"bar-component-filled":"")}))):n.a.createElement("td",null),n.a.createElement("td",{className:"text-center"},n.a.createElement("input",{disabled:!0,checked:e.mortgaged,type:"checkbox",className:"double"})))})))))}}]),t}(r.Component),M=Object(m.b)("store")(Object(m.c)(L)),A=a(15),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).proposeTrade=function(){a.props.selectTab({selectedTab:"my_info"}),a.props.store.createTrade(a.props.player,a.props.store.currentProposingTrade.givenProperties,a.props.store.currentProposingTrade.takenProperties,a.props.store.currentProposingTrade.moneyGiven,a.props.store.currentProposingTrade.moneyTaken),a.props.store.refreshCurrentProposingTrade()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store.getPlayer.money,a=this.props.store.game.player_info[this.props.player].money,r=this.props.store.playerIndex;return n.a.createElement("div",{className:"d-flex flex-column text-center"},n.a.createElement("div",{className:"d-flex flex-row justify-content-around main-trade-content"},n.a.createElement("div",{className:"d-flex flex-column text-center"},n.a.createElement("div",{className:"trade-money-label"},n.a.createElement("u",null,"Vous donnez ",this.props.store.game.player_info[this.props.player].username)),n.a.createElement("div",{className:"text-left"},"Votre argent: $",t),n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},"$")),n.a.createElement("input",{onChange:function(a){var r=a.target;r.value>t&&(r.value=t),e.props.store.setCurrentProposingTrade("moneyGiven",r.value)},value:0===this.props.store.currentProposingTrade.moneyGiven?"":this.props.store.currentProposingTrade.moneyGiven,type:"number",min:0,className:"form-control",placeholder:"Argent"})),n.a.createElement("div",{className:"player-properties-trade"},this.props.store.playersProperties(r).filter(function(e){return!e.hasHousesOnAny}).map(function(t,a){return n.a.createElement("div",{key:a,className:"trade-row d-flex flex-row justify-content-between align-items-center"},n.a.createElement("div",{className:"trade-properties-pic",style:{backgroundImage:"url(".concat(t.url,")")}}),n.a.createElement("div",{className:"trade-prop-name"},t.name),n.a.createElement("div",null,n.a.createElement("input",{onChange:function(){var a=e.props.store.currentProposingTrade.givenProperties.findIndex(function(e){return e===t.index});-1===a?e.props.store.setCurrentProposingTrade("givenProperties",[].concat(Object(A.a)(e.props.store.currentProposingTrade.givenProperties),[t.index])):e.props.store.setCurrentProposingTrade("givenProperties",[].concat(Object(A.a)(e.props.store.currentProposingTrade.givenProperties.slice(0,a)),Object(A.a)(e.props.store.currentProposingTrade.givenProperties.slice(a+1))))},type:"checkbox",className:"double"})))}))),n.a.createElement("div",{className:"d-flex flex-column text-center"},n.a.createElement("div",{className:"trade-money-label"},n.a.createElement("u",null,"Vous obtenez de ",this.props.store.game.player_info[this.props.player].username)),n.a.createElement("div",{className:"text-left"},"Son argent: $",a),n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},"$")),n.a.createElement("input",{onChange:function(t){var r=t.target;r.value>a&&(r.value=a),e.props.store.setCurrentProposingTrade("moneyTaken",r.value)},value:0===this.props.store.currentProposingTrade.moneyTaken?"":this.props.store.currentProposingTrade.moneyTaken,type:"number",min:0,className:"form-control",placeholder:"Argent"})),n.a.createElement("div",{className:"player-properties-trade"},this.props.store.playersProperties(this.props.player).map(function(t,a){return n.a.createElement("div",{key:a,className:"trade-row d-flex flex-row justify-content-between align-items-center"},n.a.createElement("div",{className:"trade-properties-pic",style:{backgroundImage:"url(".concat(t.url,")")}}),n.a.createElement("div",{className:"trade-prop-name"},t.name),n.a.createElement("div",null,n.a.createElement("input",{onChange:function(){var a=e.props.store.currentProposingTrade.takenProperties.findIndex(function(e){return e===t.index});-1===a?e.props.store.setCurrentProposingTrade("takenProperties",[].concat(Object(A.a)(e.props.store.currentProposingTrade.takenProperties),[t.index])):e.props.store.setCurrentProposingTrade("takenProperties",[].concat(Object(A.a)(e.props.store.currentProposingTrade.takenProperties.slice(0,a)),Object(A.a)(e.props.store.currentProposingTrade.takenProperties.slice(a+1))))},type:"checkbox",className:"double"})))})))),n.a.createElement("div",null,n.a.createElement("button",{disabled:(0===this.props.store.currentProposingTrade.moneyTaken||"0"===this.props.store.currentProposingTrade.moneyTaken)&&(0===this.props.store.currentProposingTrade.moneyGiven||"0"===this.props.store.currentProposingTrade.moneyGiven)&&0===this.props.store.currentProposingTrade.takenProperties.length&&0===this.props.store.currentProposingTrade.givenProperties.length,onClick:this.proposeTrade,type:"button",className:"btn btn-primary"},"Proposer un \xe9change")))}}]),t}(r.Component),D=Object(m.b)("store")(Object(m.c)(C)),U=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={selectedTrade:0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this.props.store.game.player_info&&this.props.store.game.trades.length>0){var e=this.props.store.playerIndex,t=this.props.store.game.trades.findIndex(function(t){return(t.initiating_player===e||t.trading_player===e)&&"PROPOSED"===t.state});this.setState({selectedTrade:t})}}},{key:"componentDidUpdate",value:function(e,t,a){if(-1===t.selectedTrade){var r=this.props.store.playerIndex,n=this.props.store.game.trades.findIndex(function(e){return(e.initiating_player===r||e.trading_player===r)&&"PROPOSED"===e.state});-1!==n&&this.setState({selectedTrade:n})}}},{key:"render",value:function(){var e=this;if(this.props.store.game.player_info&&this.props.store.game.trades.length>0){var t=this.props.store.playerIndex,a=this.props.store.game.trades.findIndex(function(e){return(e.initiating_player===t||e.trading_player===t)&&"PROPOSED"===e.state});if(-1===a||-1===this.state.selectedTrade)return n.a.createElement("div",{className:"text-center"},"Pas d'\xe9changes");var r=this.props.store.game.player_info[this.props.store.game.trades[this.state.selectedTrade].initiating_player],o=this.props.store.game.player_info[this.props.store.game.trades[this.state.selectedTrade].trading_player],s=this.props.store.game.trades[this.state.selectedTrade].initiating_player===t,i=s?this.props.store.game.trades[this.state.selectedTrade].taken_properties:this.props.store.game.trades[this.state.selectedTrade].given_properties,l=s?this.props.store.game.trades[this.state.selectedTrade].given_properties:this.props.store.game.trades[this.state.selectedTrade].taken_properties,c=this.props.store.game.trades[this.state.selectedTrade].given_properties.every(function(t){var a=e.props.store.game.board[t],r=e.props.store.game.board.filter(function(a){return a.group===e.props.store.game.board[t].group&&a.upgrade&&a.upgrades>0}).length>0;return a.player===e.props.store.game.trades[e.state.selectedTrade].initiating_player&&!r}),p=this.props.store.game.trades[this.state.selectedTrade].taken_properties.every(function(t){var a=e.props.store.game.board[t],r=e.props.store.game.board.filter(function(a){return a.group===e.props.store.game.board[t].group&&a.upgrade&&a.upgrades>0}).length>0;return a.player===e.props.store.game.trades[e.state.selectedTrade].trading_player&&!r});return n.a.createElement("div",{className:"d-flex flex-row justify-content-around"},n.a.createElement("div",{className:"d-flex flex-column text-center"},n.a.createElement("u",null,"\xc9changes:"),n.a.createElement("ul",{ref:"trades",className:"list-group pending-trades"},this.props.store.game.trades.map(function(e,t){return Object(_.a)({},e,{index:t})}).filter(function(e){return"PROPOSED"===e.state&&(e.initiating_player===t||e.trading_player===t)}).map(function(t,a){return n.a.createElement("li",{key:a,onClick:function(){return e.setState({selectedTrade:t.index})},className:"list-group-item list-group-item-action ".concat(t.index===e.state.selectedTrade?"active":"")},"De ",e.props.store.game.player_info[t.initiating_player].username)}))),n.a.createElement("div",{className:"d-flex flex-column"},n.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center"},n.a.createElement("div",{className:"d-flex flex-row justify-content-around main-trade-content"},n.a.createElement("div",{className:"d-flex flex-column text-center trade-view-left"},n.a.createElement("div",{className:"trade-money-label"},n.a.createElement("u",null,"Vous donnez \xe0 ".concat(s?o.username:r.username))),n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},"$")),n.a.createElement("input",{type:"number",readOnly:!0,value:s?this.props.store.game.trades[this.state.selectedTrade].given_money:this.props.store.game.trades[this.state.selectedTrade].taken_money,className:"form-control",placeholder:"Trade Money"})),n.a.createElement("div",{className:"player-properties-trade"},l.map(function(t){var a=e.props.store.game.board[t];return n.a.createElement("div",{key:t,className:"trade-row d-flex flex-row justify-content-between align-items-center"},n.a.createElement("div",{className:"trade-properties-pic",style:{backgroundImage:"url(".concat(a.url,")")}}),n.a.createElement("div",{className:"trade-prop-name"},a.name))}))),n.a.createElement("div",{className:"d-flex flex-column text-center trade-view-right"},n.a.createElement("div",{className:"trade-money-label"},n.a.createElement("u",null,"Vous gagnez de ".concat(s?o.username:r.username))),n.a.createElement("div",{className:"input-group"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},"$")),n.a.createElement("input",{type:"number",readOnly:!0,value:s?this.props.store.game.trades[this.state.selectedTrade].taken_money:this.props.store.game.trades[this.state.selectedTrade].given_money,className:"form-control",placeholder:"Trade Money"})),n.a.createElement("div",{className:"player-properties-trade"},i.map(function(t){var a=e.props.store.game.board[t];return n.a.createElement("div",{key:t,className:"trade-row d-flex flex-row justify-content-between align-items-center"},n.a.createElement("div",{className:"trade-properties-pic",style:{backgroundImage:"url(".concat(a.url,")")}}),n.a.createElement("div",{className:"trade-prop-name"},a.name))})))),n.a.createElement("div",null,t!==this.props.store.game.trades[this.state.selectedTrade].initiating_player&&n.a.createElement("button",{disabled:"NOT_TURN"===this.props.store.game.player_info[t].state||!p||!c||o.money<this.props.store.game.trades[this.state.selectedTrade].taken_money||r.money<this.props.store.game.trades[this.state.selectedTrade].given_money,onClick:function(){e.props.store.acceptTrade(e.state.selectedTrade),e.setState({selectedTrade:a}),e.refs.trades.scrollTop=0},type:"button",className:"btn btn-primary",style:{marginRight:10}},"Accepter"),n.a.createElement("button",{disabled:"NOT_TURN"===this.props.store.game.player_info[t].state,onClick:function(){t!==e.props.store.game.trades[e.state.selectedTrade].initiating_player?e.props.store.rejectTrade(e.state.selectedTrade):e.props.store.cancelTrade(e.state.selectedTrade),e.setState({selectedTrade:a}),e.refs.trades.scrollTop=0},type:"button",className:"btn btn-primary"},"".concat(t!==this.props.store.game.trades[this.state.selectedTrade].initiating_player?"Rejeter":"Annuler"))))))}return n.a.createElement("div",{className:"text-center"},"Pas d'\xe9changes")}}]),t}(r.Component),F=Object(m.b)("store")(Object(m.c)(U)),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store.game.board[this.props.store.mousedOverTile],a=this.props.store.game.player_info.map(function(e,t){return Object(_.a)({},e,{index:t})}).filter(function(e){return"OUT"!==e.state}).filter(function(t){return t.position===e.props.store.mousedOverTile}),r=[];return"rr"===t.type||"utility"===t.type?r=this.props.store.game.board.filter(function(t,a){return t.type===e.props.store.game.board[e.props.store.mousedOverTile].type&&a!==e.props.store.mousedOverTile}):"property"===t.type&&(r=this.props.store.game.board.filter(function(t,a){return t.group===e.props.store.game.board[e.props.store.mousedOverTile].group&&a!==e.props.store.mousedOverTile})),n.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center tile-info-container"},n.a.createElement("div",{className:"d-flex flex-row"},n.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center"},n.a.createElement("div",{className:"tile-info-image-div",style:{backgroundImage:"url(".concat(t.url,")")}}),n.a.createElement("div",{className:"tile-info-name"},t.name)),("property"===t.type||"rr"===t.type||"utility"===t.type)&&n.a.createElement("div",{className:"d-flex flex-row align-items-center justify-content-center"},r.map(function(e,t){return n.a.createElement("div",{key:t,className:"d-flex flex-column align-items-center justify-content-center"},n.a.createElement("div",{className:"rel-tile-info-image-div",style:{backgroundImage:"url(".concat(e.url,")")}}))}))),("chance"===t.type||"chest"===t.type)&&n.a.createElement("div",null,"Atteri ici ou pioche une carte"),"go"===t.type&&n.a.createElement("div",null,"Passe ou atteri et gagne $200."),"lux-tax"===t.type&&n.a.createElement("div",null,"Paye $75."),"income-tax"===t.type&&n.a.createElement("div",null,"Paye $200 ou 10% de ton revenu net"),("property"===t.type||"utility"===t.type||"rr"===t.type)&&n.a.createElement("div",{className:"d-flex flex-row tile-info-property justify-content-between"},n.a.createElement("div",{className:"d-flex flex-column tile-info-rents"},n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Prix:"),n.a.createElement("div",null,"$",t.cost)),t.owned&&n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Loyer actuel:"),n.a.createElement("div",null,"$",this.props.store.calcRentCostTile(this.props.store.mousedOverTile,!0))),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Loyer de base:"),n.a.createElement("div",null,"$",this.props.store.calcRentCostTile(this.props.store.mousedOverTile,!0)))),n.a.createElement("div",{className:"d-flex flex-column justify-content-between tile-info-upgrades"},"property"===t.type&&n.a.createElement("div",null,n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Co\xfbt de financement:"),n.a.createElement("div",null,"$",t.upgrade)),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"1\xe8re Maison:"),n.a.createElement("div",null,"$",t.rent[1])),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"2\xe8me Maison:"),n.a.createElement("div",null,"$",t.rent[2])),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"3\xe8me Maison:"),n.a.createElement("div",null,"$",t.rent[3])),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"4\xe8re Maison:"),n.a.createElement("div",null,"$",t.rent[4])),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Hotel:"),n.a.createElement("div",null,"$",t.rent[5]))),"rr"===t.type&&n.a.createElement("div",null,n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Un propri\xe9taire:"),n.a.createElement("div",null,"$25")),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Deux propri\xe9taires:"),n.a.createElement("div",null,"$50")),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Trois propri\xe9taires:"),n.a.createElement("div",null,"$100")),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Quatre propri\xe9taires:"),n.a.createElement("div",null,"$200"))),"utility"===t.type&&n.a.createElement("div",null,n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Un propri\xe9taire:"),n.a.createElement("div",null,"$D\xe9\xd74")),n.a.createElement("div",{className:"d-flex justify-content-between"},n.a.createElement("div",null,"Deux propri\xe9taires:"),n.a.createElement("div",null,"$D\xe9\xd710"))))),n.a.createElement("div",{className:"d-flex flex-column mt-3 players-on-tile"},a.length>0?n.a.createElement("div",null,n.a.createElement("span",null,"Joueurs sur la case:"),n.a.createElement("ul",null,a.map(function(e,t){return n.a.createElement("li",{key:t},e.username," - (",e.index+1,")")}))):n.a.createElement("span",null,"Pas de joueur ici."),t.owned?n.a.createElement("div",null,n.a.createElement("span",null,"Appartient \xe0: ",this.props.store.game.player_info[t.player].username)):null))}}]),t}(r.Component),Y=Object(m.b)("store")(Object(m.c)(G)),$=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={dropdownExpanded:!1,selectedTab:"my_info",selectedPlayer:1},a.selectTab=function(e){a.setState(e)},a.changeDropDown=function(e){a.setState(e)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"main-view"},this.props.store.game&&"NOT_STARTED"!==this.props.store.game.game_state&&n.a.createElement("div",{className:"main-view-content"},null!==this.props.store.mousedOverTile&&n.a.createElement(Y,null),null===this.props.store.mousedOverTile&&n.a.createElement(n.a.Fragment,null,n.a.createElement(P,{dropdownExpanded:this.state.dropdownExpanded,changeDropDown:this.changeDropDown,selectTab:this.selectTab,selectedTab:this.state.selectedTab}),"my_info"===this.state.selectedTab&&n.a.createElement(n.a.Fragment,null,n.a.createElement(x,null),n.a.createElement(R,null),n.a.createElement(j,null)),"my_properties"===this.state.selectedTab&&n.a.createElement(w,null),"player_info"===this.state.selectedTab&&n.a.createElement(M,{selectTab:this.selectTab,player:this.state.selectedPlayer}),"player_trade"===this.state.selectedTab&&n.a.createElement(D,{selectTab:this.selectTab,player:this.state.selectedPlayer}),"trades"===this.state.selectedTab&&n.a.createElement(F,{selectTab:this.selectTab,player:this.state.selectedPlayer}))))}}]),t}(r.Component),H=(Object(m.b)("store")(Object(m.c)($)),a(88),a(89),a(12)),J=a.n(H),B=a(17),Z=a(44);window.THREE=Z,a(92);var W=Object(_.a)({},Z,{OrbitControls:window.THREE.OrbitControls}),q=function(){function e(t){Object(i.a)(this,e);var a=t.loadedHotelJson,r=t.loadedHouseJson,n=t.scene;this.scene=n,this.loadedHotelJson=a,this.loadedHouseJson=r,this.models=[]}return Object(l.a)(e,[{key:"buyLand",value:function(e,t,a){var r=new W.MeshBasicMaterial({map:(new W.TextureLoader).load("/static/images/player_".concat(a,"_mark.png")),transparent:!0}),n=new W.Mesh(new W.PlaneGeometry(1,1),r),o=Q.tileIdToSide(t),s=e[0],i=e[2];n.scale.set(1.5,1.5,1.5),n.position.set(s,.01,i),n.rotation.x=-Math.PI/2,n.rotation.z=-Math.PI/2*o,this.scene.add(n)}},{key:"buildHouse",value:function(t,a){var r,n=(new W.ObjectLoader).parse(this.loadedHouseJson),o=Q.tileIdToSide(a);n.position.set(t[0],e.ELEVATION[e.PROPERTY_HOUSE],t[2]),(r=n.scale).set.apply(r,Object(A.a)(e.SCALES[e.PROPERTY_HOUSE])),n.rotation.y=-Math.PI/2*(o+3),this.scene.add(n),this.models.push(n)}},{key:"buildHotel",value:function(t,a){var r,n=!0,o=!1,s=void 0;try{for(var i,l=this.models[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var c=i.value;this.scene.remove(c)}}catch(g){o=!0,s=g}finally{try{n||null==l.return||l.return()}finally{if(o)throw s}}var p=t[0],d=e.ELEVATION[e.PROPERTY_HOTEL],m=t[2],u=(new W.ObjectLoader).parse(this.loadedHotelJson);u.position.set(p,d,m),(r=u.scale).set.apply(r,Object(A.a)(e.SCALES[e.PROPERTY_HOTEL])),this.scene.add(u),this.models=[u]}},{key:"getPropertyCount",value:function(){return this.models.length}}]),e}();q.SCALES=[[.02,.02,.02],[.003,.003,.003]],q.ELEVATION=[.31,0],q.PROPERTY_HOUSE=0,q.PROPERTY_HOTEL=1,q.PROPERTY_OWNER_MARK=2,q.HOTEL_MARGIN=0,q.MARK_MARGIN=0;var Q=function(){function e(){Object(i.a)(this,e),this.initBoard()}return Object(l.a)(e,[{key:"initBoard",value:function(){this.board=[];for(var t=0;t<e.SIZE;t++){for(var a=[],r=0;r<e.SIZE;r++)a.push({players:[!1,!1,!1,!1],propertyManager:null});this.board.push(a)}}},{key:"updateTileInfo",value:function(t,a){var r=e.tileIdToPos(t),n=a.type,o=a.action,s=a.playerIndex,i=a.options;switch(n){case z.MODEL_PLAYER:this.board[r[0]][r[1]].players[s]="add"===o;break;case z.MODEL_PROPERTY:this.board[r[0]][r[1]].propertyManager=new q(i)}}},{key:"getTileInfo",value:function(t){var a=e.tileIdToPos(t);return this.board[a[0]][a[1]]}}],[{key:"tileIdToPos",value:function(e){return e<10?[10,10-e]:e<20?[20-e,0]:e<30?[0,e-20]:[e-30,10]}},{key:"posToTileId",value:function(e,t){return 0===e?20+t:10===e?10-t:0===t?20-e:10===t?30+e:-1}},{key:"tileIdToSide",value:function(t){return t<10?e.SIDE_BOTTOM:t<20?e.SIDE_LEFT:t<30?e.SIDE_TOP:e.SIDE_RIGHT}}]),e}();Q.SIZE=11,Q.SIDE_TOP=2,Q.SIDE_LEFT=1,Q.SIDE_RIGHT=3,Q.SIDE_BOTTOM=0;var V=function(){function e(t){Object(i.a)(this,e);var a=t.index,r=t.modelUrl,n=t.scene,o=t.initPos,s=t.initTileId;this.scene=n,this.index=a,this.modelUrl=r,this.initPos=o,this.tileId=s}return Object(l.a)(e,[{key:"load",value:function(){var t=this;return new Promise(function(a){(new W.ObjectLoader).load(t.modelUrl,function(a){var r;t.model=a,t.model.position.set(t.initPos[0],e.ELEVATION[t.index],t.initPos[2]),(r=t.model.scale).set.apply(r,Object(A.a)(e.SCALES[t.index])),t.scene.add(t.model)},function(e){e.loaded===e.total&&(console.log(t.modelUrl+" loaded!"),a())},function(e){console.error(e)})})}},{key:"advanceTo",value:function(t,a){this.model.position.set(a[0],e.ELEVATION[this.index],a[2]),this.tileId=t}},{key:"getTileId",value:function(){return this.tileId}}]),e}();V.SCALES=[[.04,.04,.04],[1.5,1.5,1.5],[.03,.03,.03],[.03,.03,.03]],V.ELEVATION=[2.5,2,0,0];var z=function(){function e(t){Object(i.a)(this,e),this.containerEl=t.containerEl,this.assetsUrl=t.assetsUrl,this.board=new Q,this.players=[]}return Object(l.a)(e,[{key:"drawBoard",value:function(e){var t=this;this.initEngine(),this.initLights(),this.initMaterials(),this.initObjects(function(){t.onAnimationFrame(),e()})}},{key:"drawPlayers",value:function(t,a){var r=this,n=[];return new Promise(function(o){for(var s=0;s<t;s++){var i=new V({index:s,modelUrl:"".concat(r.assetsUrl,"/players/").concat(s,"/model.json"),scene:r.scene,initTileId:a[s],initPos:r.boardToWorld({tileId:a[s],type:e.MODEL_PLAYER,total:t,index:s})});r.board.updateTileInfo(a[s],{type:e.MODEL_PLAYER,action:"add",playerIndex:s}),r.players.push(i),n.push(i.load())}Promise.all(n).then(function(){o()})})}},{key:"movePlayer",value:function(t,a){var r=this,n=this.players[t].getTileId();return console.log("index and new tile id is: "+n.toString()+" "+a.toString()),this.board.updateTileInfo(n,{type:e.MODEL_PLAYER,action:"remove",playerIndex:t}),this.board.updateTileInfo(a,{type:e.MODEL_PLAYER,action:"add",playerIndex:t}),new Promise(function(o){var s=setInterval(function(){n+=1,n%=e.TILE_MAX+1;var i=r.board.getTileInfo(n).players.reduce(function(e,t){return e+t},0);r.players[t].advanceTo(n,r.boardToWorld({tileId:n,type:e.MODEL_PLAYER,total:i+1,index:i})),n===a&&(clearInterval(s),o())},200)})}},{key:"addProperty",value:function(t,a){var r=this.board.getTileInfo(a),n=r.propertyManager.getPropertyCount();t===q.PROPERTY_HOUSE?r.propertyManager.buildHouse(this.boardToWorld({tileId:a,type:e.MODEL_PROPERTY,total:n+2}),a):t===q.PROPERTY_HOTEL&&r.propertyManager.buildHotel(this.boardToWorld({tileId:a,type:e.MODEL_PROPERTY,total:2}),a)}},{key:"addLandMark",value:function(t,a){var r=this.board.getTileInfo(a);this.board.updateTileInfo(a,{type:e.MODEL_PROPERTY,options:{loadedHouseJson:this.houseModelJson,loadedHotelJson:this.hotelModelJson,scene:this.scene}}),r.propertyManager.buyLand(this.boardToWorld({tileId:a,type:e.MODEL_PROPERTY,total:1}),a,t)}},{key:"initEngine",value:function(){var t=this.containerEl.offsetWidth,a=this.containerEl.offsetHeight;this.renderer=new W.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setSize(t,a),this.renderer.setPixelRatio(window.devicePixelRatio),this.scene=new W.Scene,this.camera=new W.PerspectiveCamera(25,t/a,1,1e3),this.camera.position.set(e.SQUARE_SIZE*Q.SIZE/2,100,160),this.cameraController=new W.OrbitControls(this.camera,this.containerEl),this.cameraController.center=new W.Vector3(e.SQUARE_SIZE*Q.SIZE/2,-6,e.SQUARE_SIZE*Q.SIZE/2),this.scene.add(this.camera),this.containerEl.appendChild(this.renderer.domElement)}},{key:"initLights",value:function(){this.lights={},this.lights.topLight=new W.PointLight,this.lights.topLight.position.set(e.SQUARE_SIZE*Q.SIZE/2,150,e.SQUARE_SIZE*Q.SIZE/2),this.lights.topLight.intensity=.4,this.lights.whiteSideLight=new W.SpotLight,this.lights.whiteSideLight.position.set(e.SQUARE_SIZE*Q.SIZE/2,100,e.SQUARE_SIZE*Q.SIZE/2-300),this.lights.whiteSideLight.intensity=1,this.lights.whiteSideLight.shadow.camera.Fov=55,this.lights.blackSideLight=new W.SpotLight,this.lights.blackSideLight.position.set(e.SQUARE_SIZE*Q.SIZE/2,100,e.SQUARE_SIZE*Q.SIZE/2+300),this.lights.blackSideLight.intensity=1,this.lights.blackSideLight.shadow.camera.Fov=55,this.lights.movingLight=new W.PointLight(16379337),this.lights.movingLight.position.set(0,20,0),this.lights.movingLight.intensity=.5,this.lights.movingLight.distance=500,this.scene.add(this.lights.topLight),this.scene.add(this.lights.whiteSideLight),this.scene.add(this.lights.blackSideLight),this.scene.add(this.lights.movingLight)}},{key:"initMaterials",value:function(){this.materials={},this.materials.boardMaterial=new W.MeshLambertMaterial({map:(new W.TextureLoader).load("".concat(this.assetsUrl,"/board_texture.jpg"))}),this.materials.groundMaterial=new W.MeshBasicMaterial({transparent:!0,map:(new W.TextureLoader).load("".concat(this.assetsUrl,"/ground.png"))});var e=new W.MeshLambertMaterial({map:(new W.TextureLoader).load("".concat(this.assetsUrl,"/tiles/-1.png"))});this.materials.tileMaterial=[];for(var t=0;t<Q.SIZE;t++){for(var a=[],r=0;r<Q.SIZE;r++){var n=Q.posToTileId(t,r),o=-1===n?e:new W.MeshLambertMaterial({map:(new W.TextureLoader).load("".concat(this.assetsUrl,"/tiles/").concat(n,".png"))});a.push(o)}this.materials.tileMaterial.push(a)}}},{key:"initObjects",value:function(t){var a=this,r=new W.Loader,n=0,o=function(){3===(n+=1)&&t&&t()};r.load("./board.js",function(e){a.boardModel=new W.Mesh(e,a.materials.boardMaterial),a.boardModel.position.y=-.02,a.scene.add(a.boardModel),o()}),this.groundModel=new W.Mesh(new W.PlaneGeometry(100,100,1,1),this.materials.groundMaterial),this.groundModel.position.set(e.SQUARE_SIZE*Q.SIZE/2,-1.52,e.SQUARE_SIZE*Q.SIZE/2),this.groundModel.rotation.x=-90*Math.PI/180,this.scene.add(this.groundModel);for(var s=0;s<Q.SIZE;s++)for(var i=0;i<Q.SIZE;i++){var l=new W.Mesh(new W.PlaneGeometry(e.SQUARE_SIZE,e.SQUARE_SIZE,1,1),this.materials.tileMaterial[s][i]);l.position.x=i*e.SQUARE_SIZE+e.SQUARE_SIZE/2,l.position.z=s*e.SQUARE_SIZE+e.SQUARE_SIZE/2,l.position.y=-.01,l.rotation.x=-90*Math.PI/180,this.scene.add(l)}var c=function(e){var t=new XMLHttpRequest;return t.open("GET","".concat(a.assetsUrl,"/").concat(e,"/model.json"),!1),t.send(null),o(),JSON.parse(t.responseText)};this.houseModelJson=c("house"),this.hotelModelJson=c("hotel")}},{key:"onAnimationFrame",value:function(){var e=this;requestAnimationFrame(function(){return e.onAnimationFrame()}),this.cameraController.update(),this.lights.movingLight.position.x=this.camera.position.x,this.lights.movingLight.position.z=this.camera.position.z,this.renderer.render(this.scene,this.camera)}},{key:"resize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"boardToWorld",value:function(t){var a=t.tileId,r=t.type,n=t.total,o=t.index,s=Q.tileIdToPos(a),i=.5+s[1],l=.5+s[0],c=Q.tileIdToSide(a);if(r===e.MODEL_PLAYER){if(1===n)return[i*e.SQUARE_SIZE,0,l*e.SQUARE_SIZE];switch(c){case Q.SIDE_TOP:l-=e.MODEL_PLAYER_MARGIN,i=o%2===0?i+e.MODEL_PLAYER_OFFSET:i-e.MODEL_PLAYER_OFFSET,n>2&&(l=o<2?l+e.MODEL_PLAYER_OFFSET:l-e.MODEL_PLAYER_OFFSET);break;case Q.SIDE_BOTTOM:l+=e.MODEL_PLAYER_MARGIN,i=o%2===0?i-e.MODEL_PLAYER_OFFSET:i+e.MODEL_PLAYER_OFFSET,n>2&&(l=o<2?l-e.MODEL_PLAYER_OFFSET:l+e.MODEL_PLAYER_OFFSET);break;case Q.SIDE_LEFT:i-=e.MODEL_PLAYER_MARGIN,l=o%2===0?l-e.MODEL_PLAYER_OFFSET:l+e.MODEL_PLAYER_OFFSET,n>2&&(i=o<2?i+e.MODEL_PLAYER_OFFSET:i-e.MODEL_PLAYER_OFFSET);break;case Q.SIDE_RIGHT:i+=e.MODEL_PLAYER_MARGIN,l=o%2===0?l+e.MODEL_PLAYER_OFFSET:l-e.MODEL_PLAYER_OFFSET,n>2&&(i=o<2?i-e.MODEL_PLAYER_OFFSET:i+e.MODEL_PLAYER_OFFSET)}}else if(r===e.MODEL_PROPERTY)switch(c){case Q.SIDE_TOP:l+=e.MODEL_PROPERTY_TOP_MARGIN,i+=e.MODEL_PROPERTY_LEFT_MARGIN,i-=(n-1)*e.MODEL_PROPERTY_MARGIN+e.MODEL_PROPERTY_LEFT_OFFSET*(n>1);break;case Q.SIDE_BOTTOM:l-=e.MODEL_PROPERTY_TOP_MARGIN,i-=e.MODEL_PROPERTY_LEFT_MARGIN,i+=(n-1)*e.MODEL_PROPERTY_MARGIN+e.MODEL_PROPERTY_LEFT_OFFSET*(n>1);break;case Q.SIDE_LEFT:i+=e.MODEL_PROPERTY_TOP_MARGIN,l-=e.MODEL_PROPERTY_LEFT_MARGIN,l+=(n-1)*e.MODEL_PROPERTY_MARGIN+e.MODEL_PROPERTY_LEFT_OFFSET*(n>1);break;case Q.SIDE_RIGHT:i-=e.MODEL_PROPERTY_TOP_MARGIN,l+=e.MODEL_PROPERTY_LEFT_MARGIN,l-=(n-1)*e.MODEL_PROPERTY_MARGIN+e.MODEL_PROPERTY_LEFT_OFFSET*(n>1)}return[i*e.SQUARE_SIZE,0,l*e.SQUARE_SIZE]}}]),e}();z.SQUARE_SIZE=7.273,z.MODEL_PLAYER=0,z.MODEL_PROPERTY=1,z.MODEL_PLAYER_OFFSET=.2,z.MODEL_PLAYER_MARGIN=.1,z.MODEL_PROPERTY_TOP_MARGIN=.39,z.MODEL_PROPERTY_LEFT_MARGIN=.37,z.MODEL_PROPERTY_MARGIN=.24,z.MODEL_PROPERTY_LEFT_OFFSET=.05,z.TILE_MAX=39;var K=function(){function e(t){Object(i.a)(this,e),this.initGame(t)}return Object(l.a)(e,[{key:"initGame",value:function(e){var t=e.containerEl,a=e.assetsUrl,r=e.onBoardPainted;this.boardController=new z({containerEl:t,assetsUrl:a}),this.boardController.drawBoard(r)}},{key:"addPlayer",value:function(e,t){return this.boardController.drawPlayers(e,t)}},{key:"movePlayer",value:function(e,t){this.boardController.movePlayer(e,t)}},{key:"addProperty",value:function(e,t,a){e===q.PROPERTY_OWNER_MARK?this.boardController.addLandMark(a,t):this.boardController.addProperty(e,t)}},{key:"resizeBoard",value:function(){this.boardController.resize()}}]),e}(),X=function(){function e(){Object(i.a)(this,e);var t=[{key:"background",loop:!0,volume:.6},{key:"hover",loop:!1,volume:1},{key:"dice",loop:!1,volume:1},{key:"move",loop:!1,volume:1},{key:"build",loop:!1,volume:1},{key:"cash",loop:!1,volume:1}];this.audioPlayers={};for(var a=0;a<t.length;a++){var r=t[a];this.audioPlayers[r.key]=new Audio("/static/sound/".concat(r.key,".mp3")),r.loop&&(this.audioPlayers[r.key].loop=!0),r.volume&&(this.audioPlayers[r.key].volume=r.volume)}this.playing=!0}return Object(l.a)(e,[{key:"play",value:function(e){this.playing&&this.audioPlayers[e].play()}},{key:"mute",value:function(){this.playing=!this.playing,this.audioPlayers.background.volume=.6*this.playing}}]),e}(),ee=function(){function e(){Object(i.a)(this,e),this.audioManager=new X,this.audioManager.play("background"),this.gameInProcess=!0}return Object(l.a)(e,[{key:"initComponents",value:function(e){this.initBoard(e)}},{key:"initBoard",value:function(e){var t=this;this.gameController=new K({containerEl:e,assetsUrl:"/static/3d_assets",onBoardPainted:this.initWebSocket.bind(this)}),window.addEventListener("resize",function(){t.gameController.resizeBoard()},!1)}},{key:"initWebSocket",value:function(){var e=this;this.socket=new WebSocket("ws://".concat(window.location.host,"/game/").concat(this.hostName)),this.socket.onmessage=function(t){var a=JSON.parse(t.data);e.handleStatusChange(a)}}},{key:"onDiceRolled",value:function(){var e=this;setTimeout(function(){e.socket.send(JSON.stringify({action:"roll"}))},2e3)}},{key:"handleStatusChange",value:function(e){var t={init:this.handleInit,add_err:this.handleAddErr,roll_res:this.handleRollRes,buy_land:this.handleBuyLand,construct:this.handleConstruct,cancel_decision:this.handleCancel,game_end:this.handleGameEnd,chat:this.handleChat};this.gameInProcess&&t[e.action].bind(this)(e)}},{key:"initGame",value:function(e,t,a){this.initPlayers(e,a),this.changeCashAmount(t)}},{key:"initPlayers",value:function(t,a){this.players=t,this.currentPlayer=null;for(var r=0;r<t.length;r++){this.userName===t[r].userName&&(this.myPlayerIndex=r);var n=t[r].avatar?'<img class="user-avatar" src="'.concat(t[r].avatar,'">'):'<div class="user-group-name">'.concat(t[r].fullName.charAt(0),"</div>");this.$usersContainer.innerHTML+='\n                <div id="user-group-'.concat(r,'" class="user-group" style="background: ').concat(e.PLAYERS_COLORS[r],'">\n                    <a href="/monopoly/profile/').concat(t[r].userName,'" target="_blank">\n                        ').concat(n,'\n                    </a>\n                    <span class="user-cash">\n                        <div class="monopoly-cash">M</div>\n                        <div class="user-cash-num">1500</div>\n                    </span>\n                    <img class="user-role" src="/static/images/player_').concat(r,'.png">\n                </div>')}this.gameLoadingPromise=this.gameController.addPlayer(t.length,a)}},{key:"changeCashAmount",value:function(e){for(var t in e){document.querySelector("#user-group-".concat(t," .user-cash-num")).innerText=e[t]>=0?e[t]:0}}},{key:"changePlayer",value:function(e,t){var a=this;null!==this.currentPlayer&&document.getElementById("user-group-".concat(this.currentPlayer)).classList.remove("active");document.getElementById("user-group-".concat(e)).classList.add("active"),this.currentPlayer=e;var r=this.currentPlayer===this.myPlayerIndex?"Your Turn!":"";console.log(this);var n=e!==this.myPlayerIndex?[]:[{text:"Roll",callback:function(){document.getElementById("roll").checked=!0,document.querySelector("#modal-buttons-container button").disabled=!0,document.querySelector("#modal-buttons-container button").innerText="Hold on...",a.audioManager.play("dice"),t()}},{text:"Exchange",callback:function(){console.log("Yeaaahh")}}];this.showModal(e,r,"",this.diceMessage,n)}},{key:"showModal",value:function(t,a,r,n,o,s){var i=this;return new Promise(function(l){null===t?i.$modalAvatar.src=e.DEFAULT_AVATAR:(i.$modalAvatar.src="/static/images/player_".concat(t,".png"),i.$modalAvatar.style.background=e.PLAYERS_COLORS[t]),t===i.myPlayerIndex?i.$modalAvatar.classList.add("active"):i.$modalAvatar.classList.remove("active"),i.$modalMessage.innerHTML=n,i.$modalButtons.innerHTML="",i.$modalTitle.innerText=a,i.$modalSubTitle.innerText=r;var c=function(e){var t=document.createElement("button");t.classList.add("large-button"),t.id="modal-button-".concat(e),t.innerText=o[e].text,t.addEventListener("click",function(){o[e].callback(),l()}),t.addEventListener("mouseover",function(){i.audioManager.play("hover")}),i.$modalButtons.appendChild(t)};for(var p in o)c(p);i.$modalCard.classList.remove("hidden"),i.$modalCard.classList.remove("modal-hidden"),void 0!==s&&s>0?setTimeout(Object(B.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.hideModal(!0);case 2:l();case 3:case"end":return e.stop()}},e,this)})),1e3*s):l()})}},{key:"hideModal",value:function(e){var t=this;return new Promise(function(a){t.$modalCard.classList.add("modal-hidden"),!0===e?setTimeout(function(){a()},500):a()})}},{key:"handleInit",value:function(){var e=Object(B.a)(J.a.mark(function e(t){var a,r,n,o,s,i,l,c,p,d,m,u,g;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.players,r=t.changeCash,n=t.nextPlayer,o=t.posChange,s=t.decision,i=t.title,l=t.landname,c=t.owners,p=t.houses,this.initGame(a,r,o),e.next=12,this.gameLoadingPromise;case 12:return e.next=14,this.hideModal(!0);case 14:for(d=0;d<c.length;d++)null!==c[d]&&this.gameController.addProperty(q.PROPERTY_OWNER_MARK,d,c[d]);for(m=0;m<p.length;m++)if(4===p[m])this.gameController.addProperty(q.PROPERTY_HOTEL,m);else for(u=0;u<p[m];u++)this.gameController.addProperty(q.PROPERTY_HOUSE,m);"false"===t.waitDecision?this.changePlayer(n,this.onDiceRolled.bind(this)):(g=this.myPlayerIndex===n?[{text:"Buy",callback:this.confirmDecision.bind(this)},{text:"No",callback:this.cancelDecision.bind(this)}]:[],s=this.players[n].userName+" "+s,this.showModal(n,i,l,s,g));case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddErr",value:function(){var e=Object(B.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showModal(null,"Permission Denied","Game Not Found","Navigating back... Create your own game with your friends!",[],5);case 2:window.location="http://".concat(window.location.host,"/monopoly/join");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleRollRes",value:function(){var e=Object(B.a)(J.a.mark(function e(t){var a,r,n,o,s,i,l,c,p,d,m;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.curr_player,r=t.next_player,n=t.steps,o=t.new_pos,s=t.result,i=t.title,l=t.landname,this.players[a].userName+" gets a roll result "+n.toString(),e.next=10,this.showModal(a,this.players[a].userName+" got "+n.toString(),"","",[],2);case 10:return e.next=12,this.gameController.movePlayer(a,o);case 12:if(this.audioManager.play("move"),"true"!==t.bypass_start){e.next=18;break}return c=this.players[a].userName+" has passed the start point, reward 200.","true"!==t.is_cash_change&&(p=t.curr_cash,this.changeCashAmount(p)),e.next=18,this.showModal(a,"Get Reward","Start point",c,[],2);case 18:if("true"!==t.is_option){e.next=23;break}d=this.myPlayerIndex===a?[{text:"Buy",callback:this.confirmDecision.bind(this)},{text:"No",callback:this.cancelDecision.bind(this)}]:[],this.showModal(a,i,l,this.players[a].userName+s,d),e.next=39;break;case 23:if("true"!==t.is_cash_change){e.next=32;break}return e.next=26,this.showModal(a,i,l,this.players[a].userName+s,[],3);case 26:m=t.curr_cash,this.changeCashAmount(m),this.audioManager.play("cash"),this.changePlayer(r,this.onDiceRolled.bind(this)),e.next=39;break;case 32:if("true"!==t.new_event){e.next=38;break}return e.next=35,this.showModal(a,i,l,this.players[a].userName+s,[],3);case 35:this.changePlayer(r,this.onDiceRolled.bind(this)),e.next=39;break;case 38:this.changePlayer(r,this.onDiceRolled.bind(this));case 39:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleBuyLand",value:function(e){var t=e.curr_player,a=e.curr_cash,r=e.tile_id;this.changeCashAmount(a),this.gameController.addProperty(q.PROPERTY_OWNER_MARK,r,t);var n=e.next_player;this.changePlayer(n,this.onDiceRolled.bind(this))}},{key:"handleConstruct",value:function(e){var t=e.curr_cash,a=e.tile_id;this.changeCashAmount(t),"house"===e.build_type?this.gameController.addProperty(q.PROPERTY_HOUSE,a):this.gameController.addProperty(q.PROPERTY_HOTEL,a),this.changePlayer(e.next_player,this.onDiceRolled.bind(this)),this.audioManager.play("build")}},{key:"handleCancel",value:function(e){var t=e.next_player;this.changePlayer(t,this.onDiceRolled.bind(this))}},{key:"handleGameEnd",value:function(){var e=Object(B.a)(J.a.mark(function e(t){var a,r,n,o,s,i;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.gameInProcess=!1,a=[],r=t.all_asset,n=0;case 4:if(!(n<r.length)){e.next=20;break}o=-1e20,s=0,i=0;case 8:if(!(i<r.length)){e.next=15;break}if(null!==r[i]){e.next=11;break}return e.abrupt("continue",12);case 11:o<r[i]&&(o=r[i],s=i);case 12:i++,e.next=8;break;case 15:a.push({playerIndex:s,score:o}),r.splice(s,1,null);case 17:n++,e.next=4;break;case 20:this.showScoreboard(a);case 21:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleChat",value:function(e){var t=e.sender,a=e.content;this.addChatMessage(t,a)}},{key:"confirmDecision",value:function(){var e=Object(B.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.send(JSON.stringify({action:"confirm_decision",hostname:this.hostName})),this.audioManager.play("cash"),e.next=4,this.hideModal(!0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancelDecision",value:function(){var e=Object(B.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.send(JSON.stringify({action:"cancel_decision",hostname:this.hostName})),e.next=3,this.hideModal(!0);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addChatMessage",value:function(e,t){var a=document.createElement("div");a.classList.add("chat-message"),a.innerHTML='\n            <img class="chat-message-avatar" src="/static/images/player_'.concat(e,'.png">\n            <span class="chat-message-content">').concat(t,"</span>"),this.$chatMessageContainer.appendChild(a)}},{key:"sendMessage",value:function(){var e=this.$chatMessageToSend.value;this.socket.send(JSON.stringify({action:"chat",from:this.myPlayerIndex,content:e})),this.$chatMessageToSend.value=""}},{key:"showScoreboard",value:function(e){var t='<div id="scoreboard">';for(var a in e){var r=parseInt(a)+1;t+='\n                <div class="scoreboard-row">\n                    <span class="scoreboard-ranking">'.concat(r,'</span>\n                    <img class="chat-message-avatar" src="').concat(this.players[e[a].playerIndex].avatar,'">\n                    <span class="scoreboard-username">').concat(this.players[e[a].playerIndex].fullName,'</span>\n                    <div class="monopoly-cash">M</div>\n                    <span class="scoreboard-score">').concat(e[a].score,"</span>\n                </div>")}t+="</div>",this.$modalCardContent.classList.add("scoreboard-bg"),this.showModal(null,"Scoreboard","Good Game!",t,[{text:"Start a New Game",callback:function(){window.location="http://".concat(window.location.host,"/monopoly/join")}}])}},{key:"switchAudio",value:function(){this.audioManager.playing?this.$audioControl.classList.add("control-off"):this.$audioControl.classList.remove("control-off"),this.audioManager.mute()}},{key:"showHelp",value:function(){this.showingHelp=!this.showingHelp,this.showingHelp?(this.$helpControl.classList.remove("control-off"),this.$helpOverlay.classList.remove("hidden")):(this.$helpControl.classList.add("control-off"),this.$helpOverlay.classList.add("hidden"))}},{key:"endGame",value:function(){this.socket.send(JSON.stringify({action:"end_game"}))}}]),e}();window.onload=function(){new ee},ee.DEFAULT_AVATAR="/static/images/favicon.png",ee.PLAYERS_COLORS=["#FFD54F","#90CAF9","#E0E0E0","#B39DDB"];var te=new ee,ae=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("previous_game");e?(e=JSON.parse(e),this.props.store.setGameAuthInfo(e),this.props.store.connectToGame()):this.props.history.push("/start")}},{key:"componentDidUpdate",value:function(){this.gameDiv&&te.initComponents(this.gameDiv)}},{key:"render",value:function(){var e=this;return this.props.store.inGame?n.a.createElement("div",{id:"game-container",ref:function(t){e.gameDiv=t}}):n.a.createElement("div",{style:{margin:"auto",textAlign:"center",fontSize:80}},n.a.createElement("i",{className:"fas fa-spinner  fa-spin"}))}}]),t}(r.Component),re=Object(u.a)(Object(m.b)("store")(Object(m.c)(ae))),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).state={selectedTab:a.props.history.location.pathname},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"main d-flex flex-column"},n.a.createElement(re,null))}}]),t}(r.Component),oe=Object(u.a)(Object(m.b)("store")(Object(m.c)(ne))),se=a(122),ie=a(125),le=a(121),ce=function(){return n.a.createElement(se.a,{to:"/start"})},pe=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return n.a.createElement(ie.a,null,n.a.createElement(le.a,{exact:!0,path:"/play-game",component:oe}),n.a.createElement(le.a,{exact:!0,path:"/start",component:f}),n.a.createElement(le.a,{path:"/",component:ce}))}}]),t}(r.Component),de=a(123),me=a(1),ue=a(64),ge=a.n(ue);Object(me.f)({enforceActions:"observed"});var ye=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_URL?Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_URL:"https://monopoly.cassimkhouani.com",he=function(){function e(){var t=this;Object(i.a)(this,e),this.socket=ge()("".concat(ye,"/"),{forceNew:!0}),this.mousedOverTile=null,this.game={},this.selectedTab="my_info",this.gameAuthInfo={},this.connectToGame=function(){t.socket.emit("join_game",t.gameAuthInfo)},this.setGameAuthInfo=function(e){t.gameAuthInfo=e},this.updatePlayerJailRolls=function(e){t.socket.emit("update_player_jail_rolls",{game_id:t.gameAuthInfo.game_id,jail_turns:t.game.player_info[e].jail_turns,player_index:e})},this.startTurn=function(){if(t.playerJailState){var e=t.playerIndex;t.setPlayerState("ROLLING"),t.rollDice(),t.getPlayer.dice[0]===t.getPlayer.dice[1]?(t.setJailState(!1),t.syncPlayerJailState(),t.game.player_info[e].jail_turns=0):t.game.player_info[e].jail_turns+=1,t.game.player_info[e].jail_turns>=3&&(t.setJailState(!1),t.syncPlayerJailState(),t.game.player_info[e].jail_turns=0),t.updatePlayerJailRolls(e),t.setPlayerState("END_OF_TURN"),t.syncPlayerState()}else t.setPlayerState("ROLLING"),t.rollDice(),t.movePlayer(),t.checkTile()},this.updatePlayerMoney=function(e){t.socket.emit("update_player_money",{game_id:t.gameAuthInfo.game_id,player_money:t.game.player_info[e].money,player_index:e})},this.payOutOfJail=function(){var e=t.playerIndex;t.game.player_info[e].money-=50,t.updatePlayerMoney(e),t.setJailState(!1),t.syncPlayerJailState(),t.game.player_info[e].jail_turns=0,t.updatePlayerJailRolls(e),t.setPlayerState("END_OF_TURN"),t.syncPlayerState()},this.movePlayerDev=function(e){var a=t.playerIndex;t.game.animated_players_move={player:-1,moves:[]};for(var r=t.game.player_info[a].position;t.circularAdd(r,0,39)!==t.circularAdd(e,0,39);)t.game.animated_players_move.moves.push(t.circularAdd(r,1,39)),r+=1;t.socket.emit("move_player_animation",{game_id:t.gameAuthInfo.game_id,animated_players_move:t.game.animated_players_move});var n=setInterval(function(){Object(me.n)(function(){t.game.animated_players_move.moves.shift(),0===t.game.animated_players_move.moves.length&&clearInterval(n)})},200);t.game.player_info[a].position=e},this.movePlayerToTile=function(e){var a=t.playerIndex;t.game.animated_players_move={player:-1,moves:[]};for(var r=t.game.player_info[a].position;t.circularAdd(r,0,39)!==t.circularAdd(e,0,39);)t.game.animated_players_move.moves.push(t.circularAdd(r,1,39)),r+=1;t.socket.emit("move_player_animation",{game_id:t.gameAuthInfo.game_id,animated_players_move:t.game.animated_players_move});var n=setInterval(function(){Object(me.n)(function(){t.game.animated_players_move.moves.shift(),0===t.game.animated_players_move.moves.length&&clearInterval(n)})},100);t.game.player_info[a].position=e,t.socket.emit("move",{game_id:t.gameAuthInfo.game_id,new_position:e,player_index:a})},this.devMoveHere=function(e){t.setPlayerState("ROLLING"),t.rollDice(),t.movePlayerDev(e),t.checkTile()},this.mergeTradeData=function(e){var a=t.game.trades[e];t.game.player_info[a.initiating_player].money-=parseInt(a.given_money),t.game.player_info[a.initiating_player].money+=parseInt(a.taken_money),t.game.player_info[a.trading_player].money+=parseInt(a.given_money),t.game.player_info[a.trading_player].money-=parseInt(a.taken_money),a.given_properties.forEach(function(e){t.game.board[e].player=a.trading_player}),a.taken_properties.forEach(function(e){t.game.board[e].player=a.initiating_player})},this.acceptTrade=function(e){var a=t.game.trades[e];t.mergeTradeData(e),t.game.trades[e].state="ACCEPTED",t.addToLog("".concat(t.game.player_info[a.trading_player].username," a accept\xe9 un \xe9change de ").concat(t.game.player_info[a.initiating_player].username)),t.socket.emit("accept_trade",{game_id:t.gameAuthInfo.game_id,trade_index:e,trade:a})},this.rejectTrade=function(e){var a=t.game.trades[e];t.game.trades[e].state="REJECTED",t.addToLog("".concat(t.game.player_info[a.trading_player].username," a rejet\xe9 un \xe9change de ").concat(t.game.player_info[a.initiating_player].username)),t.socket.emit("reject_trade",{game_id:t.gameAuthInfo.game_id,trade_index:e})},this.cancelTrade=function(e){var a=t.game.trades[e];t.game.trades[e].state="CANCELED",t.addToLog("".concat(t.game.player_info[a.initiating_player].username," a annul\xe9 un \xe9change de ").concat(t.game.player_info[a.trading_player].username)),t.socket.emit("cancel_trade",{game_id:t.gameAuthInfo.game_id,trade_index:e})},this.giveUp=function(){var e=t.playerIndex;t.addToLog("".concat(t.game.player_info[e].username," a arr\xeat\xe9."));var a=t.findNextPlayerInGame(e);if(t.game.player_info[e].state="OUT",1===t.game.player_info.filter(function(e){return"OUT"!==e.state}).length){var r=t.game.player_info.find(function(e){return"OUT"!==e.state});t.socket.emit("end_game",{game_id:t.gameAuthInfo.game_id,winning_player:r}),t.game.game_state="ENDED"}else{var n=t.game.board.map(function(t){return t.player===e?Object(_.a)({},t,{owned:!1,player:null,mortgaged:!1,upgrades:0}):t});t.game.board=n,t.socket.emit("player_gives_up",{game_id:t.gameAuthInfo.game_id,player_index:e,next_player:a,new_board:n})}},this.createTrade=function(e,a,r,n,o){t.selectedTab="my_info";var s=t.playerIndex,i={initiating_player:s,trading_player:e,given_properties:a,taken_properties:r,given_money:n,taken_money:o,state:"PROPOSED"};t.addToLog("".concat(t.game.player_info[s].username," a commenc\xe9 un \xe9change avec ").concat(t.game.player_info[e].username)),t.game.trades.push(i),t.socket.emit("create_trade",{game_id:t.gameAuthInfo.game_id,trade:i})},this.payPlayer=function(){var e=t.playerTile.player,a=t.playerIndex,r=t.calcRentCostTile(t.game.player_info[a].position,!1);t.addToLog("".concat(t.getPlayer.username," paye ").concat(t.game.player_info[e].username," $").concat(r," pour avoir visit\xe9 ").concat(t.playerTile.name,".")),t.game.player_info[e].money+=r*t.getPlayer.pay_multiplier,t.game.player_info[a].money-=r*t.getPlayer.pay_multiplier,t.game.player_info[a].pay_multiplier=1,t.socket.emit("process_transaction",{game_id:t.gameAuthInfo.game_id,giving_player:a,receiving_player:e,giving_player_money:t.game.player_info[a].money,receiving_player_money:t.game.player_info[e].money})},this.addToLog=function(e){var a={log:e,time:new Date};t.game.logs.push(a),t.socket.emit("add_log",{game_id:t.gameAuthInfo.game_id,log:a})},this.checkTile=function(){var e=t.game.board[t.getPlayer.position],a=t.playerIndex;t.getPlayer.dice[0]!==t.getPlayer.dice[1]&&(t.game.player_info[a].doubles_rolled=0,t.updatePlayerDoublesRolled(a)),t.getPlayer.dice[0]===t.getPlayer.dice[1]&&t.checkAndUpdateDoublesRolled(a),t.getPlayer.jail_state||(t.addToLog("".concat(t.getPlayer.username," a fait ").concat(t.diceSum," (").concat(t.getPlayer.dice[0]," - ").concat(t.getPlayer.dice[1],"). Case ").concat(e.name,".")),t.checkIfPlayerPassedGo(),e.owned&&e.player!==a?(t.payPlayer(),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN")):e.owned||"property"!==e.type&&"rr"!==e.type&&"utility"!==e.type?"lux-tax"===e.type?t.payLuxuryTax():"chance"===e.type||"chest"===e.type?t.handleModifierCard(e.type):"income-tax"===e.type?t.setPlayerState("INCOME_TAX"):"go-to-jail"===e.type?(t.game.player_info[a].doubles_rolled=0,t.updatePlayerDoublesRolled(a),t.goToJail(a),t.addToLog("".concat(t.getPlayer.username," a colle avec melissa :("))):t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"):t.getPlayer.money<t.game.board[t.getPlayer.position].cost?t.setPlayerState("BUY_TILE_NO_MONEY"):t.setPlayerState("BUY_TILE"),t.syncPlayerState())},this.utilityChanceCardPayment=function(){var e=[Math.floor(Math.random()*Math.floor(6))+1,Math.floor(Math.random()*Math.floor(6))+1],a=10*(e[0]+e[1]),r=t.playerTile.player,n=t.playerIndex;t.game.player_info[r].money+=a,t.game.player_info[n].money-=a,t.socket.emit("process_transaction",{game_id:t.gameAuthInfo.game_id,giving_player:n,receiving_player:r,giving_player_money:t.game.player_info[n].money,receiving_player_money:t.game.player_info[r].money}),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.syncPlayerState()},this.handleModifierCard=function(e){var a=t.playerIndex,r=0,n={};if("chance"===e?(r=t.game.last_chance_card+1===t.game.chance.length?0:t.game.last_chance_card+1,t.game.last_chance_card=r,n=t.game.chance[r]):(r=t.game.last_chest_card+1===t.game.chest.length?0:t.game.last_chest_card+1,t.game.last_chest_card=r,n=t.game.chest[r]),t.addToLog("".concat(t.getPlayer.username," a pris: ").concat(n.name)),"simple_move"===n.type)0===n.position?t.playerPassedGoMoneyIncrease():t.getPlayer.position>n.position&&t.playerPassedGoMoneyIncrease(),t.movePlayerToTile(n.position),t.checkTile();else if("nearest_utility"===n.type){var o=t.findNearestType("utility");t.getPlayer.position>o&&t.playerPassedGoMoneyIncrease(),t.movePlayerToTile(o),t.game.board[o].owned&&t.game.board[o].player!==a?(t.setPlayerState("UTILITY_CHANCE_CARD"),t.syncPlayerState()):t.checkTile()}else if("nearest_rr"===n.type){t.game.player_info[a].pay_multiplier=2;var s=t.findNearestType("rr");t.getPlayer.position>s&&t.playerPassedGoMoneyIncrease(),t.movePlayerToTile(s),t.checkTile()}else"simple_bank_pay"===n.type?(t.game.player_info[a].money+=n.amount,t.updatePlayerMoney(a),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.syncPlayerState()):"move_amount"===n.type?(t.movePlayerToTile(t.getPlayer.position+n.amount),t.checkTile()):"go_to_jail"===n.type?t.goToJail(a):"pay_all_players"===n.type&&(t.payAllPlayers(n.amount),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.syncPlayerState());"chance"===e?t.socket.emit("increase_chance_card",{game_id:t.gameAuthInfo.game_id,last_chance_card:r,player_index:a,pay_multiplier:t.game.player_info[a].pay_multiplier}):t.socket.emit("increase_chest_card",{game_id:t.gameAuthInfo.game_id,last_chest_card:r,player_index:a,pay_multiplier:t.game.player_info[a].pay_multiplier})},this.payAllPlayers=function(e){var a=t.playerIndex;t.game.player_info[a].money=t.game.player_info[a].money-e*(t.game.player_info.filter(function(e){return"OUT"!==e.state}).length-1),t.game.player_info.forEach(function(t,r){r!==a&&(t.money+=e)}),t.socket.emit("pay_all_players",{game_id:t.gameAuthInfo.game_id,player_index:a,amount:e})},this.findNearestType=function(e){var a=t.game.board.findIndex(function(a,r){return!(r<t.getPlayer.position)&&a.type===e});return-1===a&&(a=t.game.board.findIndex(function(t){return t.type===e})),a},this.payLuxuryTax=function(){var e=t.playerIndex;t.game.player_info[e].money-=75,t.updatePlayerMoney(e),t.addToLog("".concat(t.getPlayer.username," paye $75 pour s'enfuir de colle :O")),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.syncPlayerState()},this.payPercentTax=function(){var e=t.playerIndex;t.game.player_info[e].money-=Math.ceil(.1*t.netWorth),t.updatePlayerMoney(e),t.addToLog("".concat(t.getPlayer.username," choisi de payer 10% de son revenu net (").concat(Math.ceil(.1*t.netWorth),").")),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.syncPlayerState()},this.payFlatTax=function(){var e=t.playerIndex;t.game.player_info[e].money-=200,t.updatePlayerMoney(e),t.addToLog("".concat(t.getPlayer.username," choisi de payer $200 dollars.")),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.syncPlayerState()},this.goToJail=function(e){t.game.player_info[e].position=10,t.socket.emit("move",{game_id:t.gameAuthInfo.game_id,new_position:10,player_index:e}),t.setJailState(!0),t.syncPlayerJailState(),t.setPlayerState("END_OF_TURN")},this.checkAndUpdateDoublesRolled=function(e){t.game.player_info[e].doubles_rolled+=1,3===t.game.player_info[e].doubles_rolled&&(t.game.player_info[e].doubles_rolled=0,t.goToJail(e)),t.updatePlayerDoublesRolled(e)},this.updatePlayerDoublesRolled=function(e){t.socket.emit("update_players_doubles",{game_id:t.gameAuthInfo.game_id,player_index:e,doubles_rolled:t.getPlayer.doubles_rolled})},this.playerPassedGoMoneyIncrease=function(){var e=t.playerIndex;t.game.player_info[e].money+=200,t.addToLog("".concat(t.getPlayer.username," passe GO et gagne $200!")),t.socket.emit("update_player_money",{game_id:t.gameAuthInfo.game_id,player_money:t.game.player_info[e].money,player_index:e})},this.checkIfPlayerPassedGo=function(){t.getPlayer.position-t.diceSum<0&&t.playerPassedGoMoneyIncrease()},this.syncPlayerJailState=function(){var e=t.playerIndex;t.socket.emit("sync_player_jail_state",{game_id:t.gameAuthInfo.game_id,player_index:e,jail_state:t.playerJailState})},this.syncPlayerState=function(){var e=t.playerIndex;t.socket.emit("sync_player_state",{game_id:t.gameAuthInfo.game_id,player_index:e,state:t.playerState})},this.buyTile=function(){var e=t.playerIndex;t.game.player_info[e].money-=t.game.board[t.getPlayer.position].cost,t.game.board[t.getPlayer.position].owned=!0,t.game.board[t.getPlayer.position].player=e,t.addToLog("".concat(t.getPlayer.username," ach\xe8te ").concat(t.playerTile.name," pour $").concat(t.playerTile.cost,".")),t.socket.emit("buy_tile",{game_id:t.gameAuthInfo.game_id,tile_index:t.getPlayer.position,tile_bought:t.game.board[t.getPlayer.position],player_money:t.game.player_info[e].money,player_index:e}),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.syncPlayerState()},this.rejectBuyTile=function(){t.addToLog("".concat(t.getPlayer.username," refuse de payer ").concat(t.playerTile.name,".")),t.getPlayer.dice[0]===t.getPlayer.dice[1]?t.setPlayerState("START_TURN"):t.setPlayerState("END_OF_TURN"),t.socket.emit("initiate_auction",{game_id:t.gameAuthInfo.game_id,tile:t.getPlayer.position}),t.game.auction=!0,t.game.auction_tile=t.getPlayer.position,t.syncPlayerState()},this.endTurn=function(){t.refreshCurrentProposingTrade(),t.setPlayerState("NOT_TURN");var e=t.playerIndex,a=t.findNextPlayerInGame(e);t.game.player_info[a].state="START_TURN",t.socket.emit("end_turn",{game_id:t.gameAuthInfo.game_id,next_player:a,old_player:e})},this.startGame=function(){t.game.game_state="STARTED",t.socket.emit("start_game",{game_id:t.gameAuthInfo.game_id})},this.movePlayer=function(){var e=t.playerIndex;t.game.animated_players_move={player:-1,moves:[]};for(var a=0;a<=t.diceSum;)t.game.animated_players_move.moves.push(t.circularAdd(t.game.player_info[e].position,a,39)),a+=1;t.socket.emit("move_player_animation",{game_id:t.gameAuthInfo.game_id,animated_players_move:t.game.animated_players_move});var r=setInterval(function(){Object(me.n)(function(){t.game.animated_players_move.moves.shift(),0===t.game.animated_players_move.moves.length&&clearInterval(r)})},200);t.game.player_info[e].position=t.circularAdd(t.game.player_info[e].position,t.diceSum,39),t.socket.emit("move",{game_id:t.gameAuthInfo.game_id,new_position:t.game.player_info[e].position,player_index:e})},this.upgradeProperty=function(e){var a=t.playerIndex;t.game.player_info[a].money-=t.game.board[e].upgrade,t.updatePlayerMoney(a),t.game.board[e].upgrades+=1,t.socket.emit("tile_upgrade",{game_id:t.gameAuthInfo.game_id,property_index:e,upgrades:t.game.board[e].upgrades})},this.downgradeProperty=function(e){var a=t.playerIndex;t.game.player_info[a].money+=t.game.board[e].upgrade/2,t.updatePlayerMoney(a),t.game.board[e].upgrades-=1,t.socket.emit("tile_upgrade",{game_id:t.gameAuthInfo.game_id,property_index:e,upgrades:t.game.board[e].upgrades})},this.socketActions=function(){t.socket.on("player_moved",function(e){console.log("player_moved",e),Object(me.n)(function(){t.game.player_info[e.player].position=e.position})}),t.socket.on("tile_bought",function(e){console.log("tile_bought",e),Object(me.n)(function(){t.game.player_info[e.player.player_index].money=e.player.player_money,t.game.board[e.tile.tile_index]=e.tile.tile})}),t.socket.on("player_money_updated",function(e){console.log("player_money_updated",e),Object(me.n)(function(){t.game.player_info[e.player_index].money=e.player_money})}),t.socket.on("turn_ended",function(e){console.log("turn_ended",e),Object(me.n)(function(){e.next_player===t.playerIndex&&("OUT"===t.game.player_info[t.playerIndex].state?t.endTurn():(t.game.player_info[e.next_player].state="START_TURN",t.game.player_info[e.old_player].state="NOT_TURN",new Notification("Your turn!").onclick=function(){window.focus()}))})}),t.socket.on("sync_player_jail_state_synced",function(e){console.log("sync_player_jail_state_synced",e),Object(me.n)(function(){t.game.player_info[e.player_index].jail_state=e.jail_state})}),t.socket.on("update_player_jail_rolls_updated",function(e){console.log("update_player_jail_rolls_updated",e),Object(me.n)(function(){t.game.player_info[e.player_index].jail_turns=e.jail_turns})}),t.socket.on("transaction_processed",function(e){console.log("transaction_processed",e),Object(me.n)(function(){t.game.player_info[e.giving_player].money=e.giving_player_money,t.game.player_info[e.giving_player].pay_multiplier=1,t.game.player_info[e.receiving_player].money=e.receiving_player_money})}),t.socket.on("players_doubles_updated",function(e){console.log("players_doubles_updated",e),Object(me.n)(function(){t.game.player_info[e.player_index].doubles_rolled=e.doubles_rolled})}),t.socket.on("dice_roll_updated",function(e){console.log("dice_roll_updated",e),Object(me.n)(function(){t.game.player_info[e.player_index].dice=e.dice})}),t.socket.on("player_state_synced",function(e){console.log("player_state_synced",e),Object(me.n)(function(){t.game.player_info[e.player_index].state=e.state})}),t.socket.on("chest_card_increased",function(e){console.log("chest_card_increased",e),Object(me.n)(function(){t.game.player_info[e.player_index].pay_multiplier=e.pay_multiplier,t.game.last_chest_card=e.last_chest_card})}),t.socket.on("chance_card_increased",function(e){console.log("chance_card_increased",e),Object(me.n)(function(){t.game.player_info[e.player_index].pay_multiplier=e.pay_multiplier,t.game.last_chance_card=e.last_chance_card})}),t.socket.on("property_mortgaged",function(e){console.log("property_mortgaged",e),Object(me.n)(function(){t.game.board[e.property_index].mortgaged=e.mortgage_value})}),t.socket.on("tile_upgraded",function(e){console.log("tile_upgraded",e),Object(me.n)(function(){t.game.board[e.property_index].upgrades=e.upgrades})}),t.socket.on("trade_accepted",function(e){console.log("trade_accepted",e),t.mergeTradeData(e.trade_index),Object(me.n)(function(){t.game.trades[e.trade_index].state="ACCEPTED"})}),t.socket.on("trade_rejected",function(e){console.log("trade_rejected",e),Object(me.n)(function(){t.game.trades[e.trade_index].state="REJECTED"})}),t.socket.on("auction_initiated",function(e){console.log("trade_rejected",e),Object(me.n)(function(){t.game.auction=!0,t.game.auction_tile=e.tile})}),t.socket.on("trade_canceled",function(e){console.log("trade_canceled",e),Object(me.n)(function(){t.game.trades[e.trade_index].state="CANCELED"})}),t.socket.on("trade_created",function(e){console.log("trade_created",e),Object(me.n)(function(){t.game.trades.push(e.trade)})}),t.socket.on("log_added",function(e){console.log("log_added",e),Object(me.n)(function(){t.game.logs.push(e.log)})}),t.socket.on("game_started",function(e){console.log("game_started",e),Object(me.n)(function(){t.game.game_state="STARTED"})}),t.socket.on("player_gave_up",function(e){console.log("player_gave_up",e),Object(me.n)(function(){t.game.player_info[e.player_index].state="OUT",t.game.player_info[e.next_player].state="START_TURN",t.game.board=e.new_board})}),t.socket.on("game_ended",function(e){console.log("game_ended",e),Object(me.n)(function(){t.game.game_state="ENDED"})}),t.socket.on("animated_players_moved",function(e){console.log("animated_players_moved",e),Object(me.n)(function(){t.game.animated_players_move=e.animated_players_move;var a=setInterval(function(){Object(me.n)(function(){t.game.animated_players_move.moves.shift(),0===t.game.animated_players_move.moves.length&&clearInterval(a)})},200)})}),t.socket.on("pay_all_players_payed",function(e){console.log("pay_all_players_payed",e),Object(me.n)(function(){t.game.player_info[e.player_index].money=t.game.player_info[e.player_index].money-e.amount*(t.game.player_info.filter(function(e){return"OUT"!==e.state}).length-1),t.game.player_info.forEach(function(t,a){a!==e.player_index&&(t.money+=e.amount)})})})},this.setGameInfo=function(e){t.game=e},this.setMousedOverTile=function(e){t.mousedOverTile=e},this.clearMousedOverTile=function(){t.mousedOverTile=null},this.rollDice=function(){var e=t.playerIndex;t.game.player_info[e].dice=[Math.floor(Math.random()*Math.floor(6))+1,Math.floor(Math.random()*Math.floor(6))+1],t.socket.emit("update_dice_roll",{game_id:t.gameAuthInfo.game_id,dice:t.game.player_info[e].dice,player_index:e})},this.calcRentCostTile=function(e,a){var r=t.game.board[e];if("rr"===r.type){var n=t.game.board.filter(function(e){return"rr"===e.type&&e.player===r.player}).length;return r.base_rent*Math.pow(2,n-1)}if("property"===r.type){if(r.mortgaged)return 0;var o=0===t.game.board.filter(function(e){return e.group===r.group&&e.player!==r.player}).length,s=t.game.board.filter(function(e){return e.group===r.group}).every(function(e){return!e.mortgaged});return o&&s?r.upgrades>0?r.rent[r.upgrades]:2*r.rent[0]:r.rent[0]}if("utility"===r.type)return 0===t.game.board.filter(function(e){return e.group===r.group&&e.player!==r.player}).length?a?"D\xe9\xd710":10*t.diceSum:a?"D\xe9\xd74":4*t.diceSum},this.mortgageProperty=function(e){var a=t.playerIndex;t.game.board[e].mortgaged?(t.game.player_info[a].money-=t.game.board[e].cost/2,t.updatePlayerMoney(a)):(t.game.player_info[a].money+=t.game.board[e].cost/2,t.updatePlayerMoney(a)),t.game.board[e].mortgaged=!t.game.board[e].mortgaged,t.socket.emit("mortgage_property",{game_id:t.gameAuthInfo.game_id,property_index:e,mortgage_value:t.game.board[e].mortgaged})},this.circularAdd=function(e,t,a){return e+t>a?(t-=a-e)-1:e+t},this.setPlayerState=function(e){t.game.player_info[t.playerIndex].state=e},this.setJailState=function(e){t.game.player_info[t.playerIndex].jail_state=e},this.netWorthOfPlayer=function(e){if(!t.game.player_info)return 0;var a=t.game.player_info[e].money;return t.game.board.forEach(function(t){t.owned&&t.player===e&&(a+=t.cost,t.upgrades&&(a+=t.upgrades*t.upgrade))}),a},this.liquidWorthofPlayer=function(e){if(!t.game.player_info)return 0;var a=t.game.player_info[e].money;return t.game.board.forEach(function(t){t.owned&&t.player===e&&(a+=t.cost/2,t.upgrades&&(a+=t.upgrades*(t.upgrade/2)))}),a},this.playersProperties=function(e){var a=t.game.player_info[e];return t.game.board.map(function(e,r){var n=0===t.game.board.filter(function(e){return e.group===t.game.board[r].group&&e.player!==t.game.board[r].player}).length,o=t.game.board.filter(function(e){return e.group===t.game.board[r].group}).every(function(e){return!e.mortgaged}),s=t.game.board.filter(function(e){return e.group===t.game.board[r].group}).every(function(t){return!(e.upgrades>t.upgrades)&&(e.upgrades<t.upgrades||e.upgrades===t.upgrades)}),i=t.game.board.filter(function(e){return e.group===t.game.board[r].group}).every(function(t){return!(e.upgrades<t.upgrades)&&(e.upgrades>t.upgrades||e.upgrades===t.upgrades)}),l=t.game.board.filter(function(e){return e.group===t.game.board[r].group&&e.upgrade&&e.upgrades>0}).length>0,c=s&&n&&o&&t.game.board[r].upgrades<5&&a.money>=t.game.board[r].upgrade,p=i&&n&&o&&t.game.board[r].upgrades>0,d=t.calcRentCostTile(r,!0);return Object(_.a)({},e,{index:r,canUpgrade:c,canDowngrade:p,calculatedRent:d,ownsAll:n,hasHousesOnAny:l})}).filter(function(t){return t.owned&&t.player===e}).sort(function(e,t){return e.group===t.group?e.cost<t.cost?1:-1:e.type===t.type?e.group<t.group?-1:1:e.type<t.type?-1:1})},this.canUpgrade=function(e){var a=0===t.game.board.filter(function(a){return a.group===t.game.board[e].group&&a.player!==t.game.board[e].player}).length,r=t.game.board.filter(function(a){return a.group===t.game.board[e].group}).every(function(e){return!e.mortgaged});return a&&r&&t.game.board[e].upgrades<3&&t.getPlayer.money>=t.game.board[e].upgrade},this.findNextPlayerInGame=function(e){for(var a=e;a<3*t.game.player_info.length;a++){var r=t.game.player_info[(a%t.game.player_info.length+t.game.player_info.length)%t.game.player_info.length];if("OUT"!==r.state&&r.id!==e)return r.id}},this.refreshCurrentProposingTrade=function(){t.currentProposingTrade={moneyGiven:0,moneyTaken:0,givenProperties:[],takenProperties:[]}},this.setCurrentProposingTrade=function(e,a){t.currentProposingTrade[e]=a},this.currentProposingTrade={moneyGiven:0,moneyTaken:0,givenProperties:[],takenProperties:[]},this.socket.on("game_info",function(e){console.log("game info",e),e&&t.setGameInfo(e)}),this.socket.on("reconnect",function(){console.log("reconnecting"),t.connectToGame()}),this.socketActions()}return Object(l.a)(e,[{key:"diceSum",get:function(){return this.getPlayer.dice[0]+this.getPlayer.dice[1]}},{key:"playerTile",get:function(){return this.game.board[this.getPlayer.position]}},{key:"getPlayer",get:function(){return this.game.player_info[this.playerIndex]}},{key:"inGame",get:function(){return!!this.game.player_info&&-1!==this.playerIndex}},{key:"playerState",get:function(){return this.getPlayer.state}},{key:"playerJailState",get:function(){return this.getPlayer.jail_state}},{key:"netWorth",get:function(){var e=this.playerIndex,t=this.getPlayer.money;return this.game.board.forEach(function(a){a.owned&&a.player===e&&(t+=a.cost,a.upgrades&&(t+=a.upgrades*a.upgrade))}),t}},{key:"liquidWorth",get:function(){var e=this.playerIndex,t=this.getPlayer.money;return this.game.board.forEach(function(a){a.owned&&a.player===e&&(t+=a.cost/2,a.upgrades&&(t+=a.upgrades*(a.upgrade/2)))}),t}},{key:"playerIndex",get:function(){var e=this;return this.game.player_info?this.game.player_info.findIndex(function(t){return t.username===e.gameAuthInfo.username}):null}},{key:"currentPlayerTurn",get:function(){return this.game.player_info.find(function(e){return"NOT_TURN"!==e.state&&"OUT"!==e.state})||{}}}]),e}();Object(me.h)(he,{players:me.m,game:me.m,currentProposingTrade:me.m,mousedOverTile:me.m,selectedTab:me.m,gameAuthInfo:me.m,diceSum:me.e,playerState:me.e,inGame:me.e,playerJailState:me.e,getPlayer:me.e,playerTile:me.e,netWorth:me.e,liquidWorth:me.e,playerIndex:me.e,currentPlayerTurn:me.e,rollDice:me.d,refreshCurrentProposingTrade:me.d,setCurrentProposingTrade:me.d,setPlayerState:me.d,movePlayerToTile:me.d,checkTile:me.d,payPercentTax:me.d,payFlatTax:me.d,goToJail:me.d,utilityChanceCardPayment:me.d,checkAndUpdateDoublesRolled:me.d,setJailState:me.d,clearMousedOverTile:me.d,setMousedOverTile:me.d,setUsername:me.d,mortgageProperty:me.d,setGameInfo:me.d,createTrade:me.d,payOutOfJail:me.d,payLuxuryTax:me.d,connectedFromNew:me.d,movePlayerDev:me.d,movePlayer:me.d,payPlayer:me.d,buyTile:me.d,mergeTradeData:me.d,acceptTrade:me.d,addToLog:me.d,startTurn:me.d,payAllPlayers:me.d,endTurn:me.d,handleModifierCard:me.d,upgradeProperty:me.d,giveUp:me.d,rejectTrade:me.d,rejectBuyTile:me.d,cancelTrade:me.d,setGameAuthInfo:me.d,downgradeProperty:me.d,checkIfPlayerPassedGo:me.d,playerPassedGoMoneyIncrease:me.d,socketActions:me.d,connectToGame:me.d,startGame:me.d});var fe=new he;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(m.a,{store:fe},n.a.createElement(de.a,null,n.a.createElement(pe,null))),document.getElementById("root")),Notification.requestPermission().then(function(e){}),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},50:function(e,t,a){},66:function(e,t,a){e.exports=a(120)},88:function(e,t,a){},89:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.5a9cc9d3.chunk.js.map